app.factory("actionService",["$http","$q",function(n,t){function e(){var n=-1,t,i;return navigator.appName=="Microsoft Internet Explorer"&&(t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),i.exec(t)!=null&&(n=parseFloat(RegExp.$1))),n}var i={getLeaderboard:{type:"POST",dependent:[],globalName:null,url:"/Home/GetBettingPotData"},"jquery.cycle2.js":{type:"text/javascript",dependent:[],globalName:"$.fn.cycle",url:"https://cdn.weibo-hk.com/Web.Portal/_Common/Scripts/jquery.cycle2.js"},"jquery.cycle2.carousel.js":{type:"text/javascript",dependent:["jquery.cycle2.js"],globalName:"$.fn.cycle.transitions.carousel",url:"https://cdn.weibo-hk.com/Web.Portal/_Common/Scripts/jquery.cycle2.carousel.js"}},f=function(){return i},r={},s=function(lib){var dependentList=[],actionRule=f(),deferred,i;if(r[lib])return r[lib];if(deferred=t.defer(),r[lib]=deferred.promise,actionRule[lib].dependent.length>0){for(i=0;i<actionRule[lib].dependent.length;i++)dependentList.push(o.name+'("'+actionRule[lib].dependent[i]+'")');t.all(eval("["+dependentList.join(",")+"]")).then(function(n){deferred.resolve(n)},function(n){deferred.reject(n)})}else deferred.resolve(lib);return deferred.promise},u={},o=function(n){var r=f(),i;return u[n]?u[n]:(i=t.defer(),u[n]=i.promise,r[n]?s(n).then(function(){var actionRuleString='["'+r[n].globalName.replace(".",'"]["')+'"]',script;eval("!window"+actionRuleString)?e()<0||e()>8?(script=document.createElement("script"),script.type=r[n].type,script.src=r[n].url,script.onload=function(){i.resolve("load"+n)},document.body.appendChild(script)):$.getScript(r[n].url,function(){i.resolve("load"+n)}):i.resolve(n+"already load")},function(){i.reject(n)}):i.reject(n),i.promise)};return{GET:function(t){t=""+t;var r=i[t].url;return n.get(r)},POST:function(t,r){t=""+t;var u=i[t].url,f=r||{};return n.post(u,f)},addLibrary:function(n){var u=null,r=t.defer();return u=r.promise,i[n]&&i[n].type==="text/javascript"?o(n).then(function(n){r.resolve(n)},function(n){r.reject(n)}):r.reject("Please ensure your library in our action-list!"),u}}}]);app.factory("ActivityService",["$http","$q",function(n,t){return{getActivity:function(){var r=t.defer(),f=r.promise,u=(new Date).valueOf(),e=JSON.parse(localStorage.getItem("ActivityTime_0.0.1"));return!localStorage.getItem("Activity_0.0.1")||u-parseInt(e)>6e5?n.post("/Lobby/GetAdvertisements",{IsMobile:!1}).then(function(n){var t=n.data,f=t.AdCategoryItems;for(i=0;i<f.length;i++)for(j=0;j<f[i].AdItems.length;j++)f[i].AdItems[j].ImgUrl="https://cdn.weibo-hk.com/"+f[i].AdItems[j].ImgUrl;t.EntranceImg=t.EntranceImg?"https://cdn.weibo-hk.com/"+t.EntranceImg:null;t.LobbyImg=t.LobbyImg?"https://cdn.weibo-hk.com/"+t.LobbyImg:null;t.ColorCode=t.ColorCode?t.ColorCode:null;localStorage.setItem("Activity_0.0.1",JSON.stringify(t));localStorage.setItem("ActivityTime_0.0.1",JSON.stringify(u));r.resolve(t)}):r.resolve(JSON.parse(localStorage.getItem("Activity_0.0.1"))),f}}}]);app.factory("AnnouncementService",["$window","$location","$http","$filter","CookieService","MeidonTimeService","CustomModalService",function(n,t,i,r,u,f,e){function o(){var c=r("filterCdn"),o,s,h=this;return this.getList=function(){return i.post("/Announcement/GetAnnouncementList",null).then(function(n){var t=n.data;return t.IsSuccess===!1&&e.alertError(t.ErrorMessage),h._listWithoutCdn2Redirect(t)})},this.getListSingleton=function(){return o=o||this.getList()},this.checkVersion=function(){return i.post("/Announcement/GetVersionAndCheckPopup").then(function(n){var t=n.data,u,i,r,o;return t.IsSuccess===!1?(e.alertError(t.ErrorMessage),!1):(u=t.NeedPopup,u&&(i="{0}={1};",i=t.MemberVersion?"MemberVersion="+t.MemberVersion+";":"GuestVersion="+t.GuestVersion+";",t.PopupFrequency&&(r=f.getCurrentMeidon(),r.set({h:0,m:0,s:0,ms:0}),r.add(t.PopupFrequency,"d"),o=f.getMeidonToLocal(r).toDate(),i+="expires="+o+";"),document.cookie=i+"path=/"),u)})},this.getTitleList=function(){return i.post("/Announcement/GetAnnouncementTitleList",null).then(function(n){var t=n.data;return t.IsSuccess===!1&&e.alertError(t.ErrorMessage),t.TitleList})},this.getSettingSingleton=function(){return s=s||this.getTitleList()},this._listWithoutCdn2Redirect=function(n){var t=[];return n.List&&angular.forEach(n.List,function(n){t.push({id:n.Id,content:n.Content?n.Content.replace(/src=\"([^\"])+(png|jpg|gif)\"/g,function(n){return c(n,"https://cdn2.weibo-hk.com/")}):"",sort:n.Sort,title:n.Title})}),{List:t,PopupHeader:n.PopupHeader}},this.addPreviewListener=function(i){function r(t){var u={content:h._listWithoutCdn2Redirect(t.data),marquee:t.data.Marquee};i(u);n.removeEventListener("message",r,!1)}n.addEventListener("message",r,!1);n.opener.postMessage("",t.search().announcement)},this.recordNeverPopupTimes=function(){if(!u.getCookie("NeverPopupDatetime")){var n=f.getCurrentMeidon().format("YYYY-MM-DD HH:mm:ss");u.setCookie("NeverPopupDatetime",n,1);i.get("/Announcement/RecordNeverPopupTimes",null)}},this.uncheckNeverPopup=function(){u.getCookie("NeverPopupDatetime")&&u.deleteCookie("NeverPopupDatetime")},this.checkNeverPopupCookieExist=function(){return u.getCookie("NeverPopupDatetime")!==null},this}return new o}]);angular.module("boardGame",[]).factory("BoardGameService",[function(){var n=function(n){var t="";return angular.forEach(n,function(n,i){t=t+"&"+i+"="+n}),t=t.slice(1,t.length)};return{toBoardGame:function(t){var i,r;switch(t.GameSupplierType){case 25:i="/Account/LoginToRg2Board?";r="Gpk";break;case 43:i="/Account/LoginToKg?gameId="+t.GameIds.GameId+"&isMobile=false";r="Kg";break;case 51:i="/Account/LoginToCity761Board?"+n(t.GameIds)+"&isMobile=false";r="City761";break;case 52:i="/Account/LoginToFsBoard?"+n(t.GameIds);r="Fs";break;case 56:i="/Account/LoginToNw?"+n(t.GameIds);r="Nw"}return{action:i+(/\?$/.test(i)?"":"&")+"gid="+t.GId,supplier:r}}}}]);app.factory("bodyScrollService",["$http",function(){var n=function(){var n=$(window).height(),t=$(document).height(),i=$(document).scrollTop();return t-(i+n)};return{getDistanceOfBottom:n}}]);app.factory("captchaService",["$http","$q","$modal",function(n,t,i){function r(n){var r=JSON.parse(sessionStorage.getItem("Verify"+n))||!1,u=sessionStorage.getItem("Captcha"+n)||"",t;return r===!1?!1:(t=(new Date).getTime(),i.open({templateUrl:"/Account/CaptchaDialog",controller:"AccountCaptchaDialogCtrl",resolve:{captchaId:function(){return u},identityId:function(){return t}},windowClass:"modal-captcha",backdrop:"static",keyboard:!1}).result.then(function(){},function(){}),t)}return{post:function(t){return t?n.post("/Home/GetCaptchaFor"+t).then(function(n){var i=n.data,r=i.value,u="data:image/png;base64,"+i.image;return sessionStorage.setItem("Verify"+t,i.needNeCaptcha||!1),sessionStorage.setItem("Captcha"+t,i.captchaId||""),{checkCodeEncrypt:r,image:u}},function(){return!1}):n.post("/GetCaptcha").then(function(n){var t=n.data,i=t.value,r="data:image/png;base64,"+t.image;return{checkCodeEncrypt:i,image:r}},function(){return!1})},verifyViaDialogForLogin:function(){return r("Login")},verifyViaDialogForRegister:function(){return r("Register")}}}]);app.factory("ContactInfoService",["$http","$q",function(n,t){function u(){r=!0;n.post("/Cdn/GetContactList").then(function(n){i.resolve(n.data)})}var i=t.defer(),r=!1;return{getContactInfo:function(){return r||u(),i.promise}}}]);app.factory("CookieService",[function(){var n=function(n,t,i){var r=new Date;r.setTime(r.getTime()+i);document.cookie=n+"="+t+";path=/;expires="+r.toGMTString()};return{getCookie:function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return null},setCookie:function(t,i,r){var u=864e5*r;n(t,i,u)},setCookieMinute:function(t,i,r){var u=6e4*r;n(t,i,u)},deleteCookie:function(t){n(t,"",-1)}}}]);app.factory("DataService",["$rootScope",function(n){var t={Count:"0"};return n.$broadcast("getCount"),{getValue:function(){return t},setValue:function(n){return t.Count=n,t}}}]);app.factory("detectionRobotService",["$http","$q","labelService","CustomModalService",function(n,t,i,r){function u(n){if(n.length===0)return t.when({valid:!0,tip:null});var i=n[0].method,f=n[0].turnOn,e=n[0].message,o=n[0].value,s=n[0].error;return f?r[i](e).then(function(i){return i===o?(n.shift(),u(n)):t.when({valid:!1,tip:s})}):(n.shift(),u(n))}return{randomBlock:function(){var n=[{method:"prompt",pass:!1,turnOn:!0}];return n.sort(function(){return Math.random()>.5?-1:1}),n},methodPerfer:function(n,t,r){for(var f,o={prompt:[{required:!0,message:i.get("DetectionRobot.prompt1"),value:t.Account,error:i.get("DetectionRobot.promptError1")},{required:!0,message:i.get("DetectionRobot.prompt2"),value:t.Password,error:i.get("DetectionRobot.promptError2")},{required:r.IsRequired_MoneyPassword||!1,message:i.get("DetectionRobot.prompt3"),value:t.MoneyPassword,error:i.get("DetectionRobot.promptError3")}]},u=[],e=0;e<o[n].length;e++)o[n][e].required&&u.push(o[n][e]);return f=Math.floor(Math.random()*u.length),{id:f,message:u[f].message,value:u[f].value,error:u[f].error}},detectionRobot:function(i,r){var e=this,f=t.defer(),o=function(){for(var o,n=e.randomBlock(),t=0;t<n.length;t++)o=e.methodPerfer(n[t].method,i,r),n[t].message=o.message,n[t].value=o.value,n[t].error=o.error;u(n).then(function(n){n.valid?f.resolve(i):f.reject(n.tip)})};return n.post("/Home/GetRobotQuestionRegisterSetting",{}).then(function(n){n&&""+n.data=="true"?o():f.resolve(i)},function(){f.reject(i)}),f.promise}}}]);app.factory("ExternalPaymentService",["$http","$q",function(n,t){return{GetExternalPayment:function(){var i=t.defer(),r=i.promise;return n.post("/Deposit/GetExternalPayment").then(function(n){i.resolve(n.data)}),r}}}]);angular.module("slotGame",[]).factory("FishGameService",["$http","$q",function(n,t){var i=function(n){var t="";return angular.forEach(n,function(n,i){t=t+"&"+i+"="+n}),t=t.slice(1,t.length)};return{getFishList:function(i){var r=null,u=t.defer();return r=u.promise,n.post("/Game/GetFishGames",i).then(function(n){u.resolve(n.data)}),r},toFishGame:function(n){var t,r;switch(n.GameSupplierType){case 1:t="/Account/LoginToBb?"+i(n.GameIds);r="Bb";break;case 6:t="/Account/LoginToAg?lunchGame=6&gamecategory=36";r="Ag";break;case 11:case 33:t="/Account/LoginToPtGroup?categoryType=1&gamecode="+n.GameIds.GameId;r="Pt";break;case 36:t="/Account/LoginToMw?gameId="+n.GameIds.GameId;r="Mw";break;case 26:t="/Account/LoginToJdb?"+i(n.GameIds);r="Jdb";break;case 14:t="/Account/LoginToGns?gameId="+n.GameIds.GameId+"&isFish=true";r="Gns";break;case 37:t="/Account/LoginToPg?gameId="+n.GameIds.GameId+"&isFish=true";r="Pg";break;case 25:t="/Account/LoginToRg2Fish?"+i(n.GameIds);r="Rg";break;case 45:t="/Account/LoginToPts?gameId="+n.GameIds.GameId;r="Pts";break;case 28:t="/Account/LoginToCq9?"+i(n.GameIds);r="Cq9";break;case 51:t="/Account/LoginToCity761Fish?"+i(n.GameIds);r="City761";break;case 52:t="/Account/LoginToFsFish?"+i(n.GameIds);r="Fs"}return{action:t+"&gid="+n.GId,supplier:r}}}}]);app.factory("FunctionSwitchService",["$http","$q",function(n,t){function u(){r=!0;n.post("/Home/GetAllEnableFunctionSwitch",null).then(function(n){for(var r=n.data.FuncSwitchList,u={},t=0;t<r.length;t++)u[r[t]]=!0;i.resolve(u)})}var i=t.defer(),r=!1;return{getFunctionSwitch:function(){return r||u(),i.promise}}}]);app.factory("gameNavigationSortService",["$q","$http","languageService",function(n,t,i){function o(i,f,e){function b(n){p(c,y)&&(localStorage.setItem(o,JSON.stringify(n)),localStorage.setItem(v,l))}function p(n,t){var i=l-parseInt(t)<(e?e:w);return!n||!t||!i}var h=n.defer(),w=6e5,l=(new Date).valueOf(),a=i.split("/").reverse()[0]+(f?JSON.stringify(f).trim().replace(/\"\'/g,""):""),o="__"+a+"_"+u+"__",v="__"+a+"_"+u+"_SettingTime__",c=s(localStorage.getItem(o)),y=localStorage.getItem(v);return p(c,y)?(r[o]=r[o]||t.post(i,f),r[o].then(function(n){return b(n.data),h.resolve(n.data),n}),h.promise):(h.resolve(c),h.promise)}function s(n){try{return JSON.parse(n)}catch(t){return!1}}var u="0.0.2",f=n.defer(),e=n.defer(),r={};return{navPromise:f.promise,getGameNavigationSort:function(){function h(n){n.forEach(function(n){n[r]===null&&(n[r]=u["GlobalLobby_"+n.NavigationKindName])})}var e=this,s=i.currentLanguage,r=i.getLangPropertyName(s),u;return n.all([t.post("/GetMultilingual",["GlobalLobby"]).then(function(n){return n.data}),o("/GameNavigationSort/GetGameNavigationSort",null)]).then(function(n){u=n[0];h(n[1]);f.resolve(n[1])}),e.navPromise},gamePromise:e.promise,getGameEntranceList:function(){var n=this;return o("/GameNavigationSort/GetGameEntrance",{device:"Web"}).then(function(n){e.resolve(n)}),n.gamePromise}}}]);angular.module("slotGame").factory("GenericGameService",["$http","$location",function(n){function t(){function i(n,t){var f=n.GameKind,u="/Account/LoginToSupplier?",e=r(n.GameSupplierType,f),i={supplierType:"supplierType="+n.GameSupplierType,gId:"gId="+n.GId};t?i.cId="cId="+t:null;switch(n.GameSupplierType){case 1:i.externalType="externalType="+n.GameIds.bbpagesite;break;case 3:i.externalType="externalType="+n.GameIds.gameId;break;case 6:i.externalType="externalType="+n.GameIds.lunchGame;break;case 9:case 41:i.externalType="externalType="+n.GameIds.LunchGame;break;case 11:case 33:i.externalType=f===1?"externalType=0":"externalType=1";break;case 21:i.externalType="externalType="+n.GameIds.igType;break;case 34:case 39:delete i.supplierType;i.groupName="groupName=Tgp";f===1&&(u="/Account/LoginToSunbetLiveBetLimit?")}return angular.forEach(i,function(n){u=u+n+"&"}),{action:u.substring(0,u.length-1),supplier:e}}function r(n,t){var i="";switch(n){case 1:i="Bb";break;case 3:i="Saba";break;case 6:i="Ag";break;case 9:i="Mg2";break;case 11:i="Pt2";break;case 12:i="Gpi";break;case 13:i="Sing";break;case 14:i="Gns";break;case 15:i="Prg";break;case 16:i="Sg";break;case 17:i="Ab";break;case 21:i="Ig";break;case 25:i="Rg";break;case 26:i="Jdb";break;case 27:i="Haba";break;case 28:i="Cq9";break;case 29:i="Evo";break;case 30:i="NetEnt";break;case 31:i="Bg";break;case 32:i="Gd";break;case 33:i="Pt3";break;case 34:case 39:i=t===1?"Sunbet":"RedTiger";break;case 35:i="GameArt";break;case 36:i="Mw2";break;case 38:i="Cmd";break;case 40:i="Lg";break;case 41:i="Mg3";break;case 42:i="Isb";break;case 43:i="Kg";break;case 44:i="Lx";break;case 45:i="Pts";break;case 46:i="EBet";break;case 47:i="Im";break;case 48:i="Png";break;case 49:i="Og";break;case 50:i="Vr";break;case 51:i="City761";break;case 52:i="Fs";break;case 53:i="Sa";break;case 54:i="Ims";break;case 55:i="Ibo";break;case 56:i="Nw";break;case 57:i="Ka";break;case 58:i="Js";break;case 59:i="Gti";break;case 60:i="Rtg";break;case 61:i="Pls";break;case 62:i="Mt";break;case 63:i="Ae";break;case 65:i="Th";break;case 64:i="Ibo2";break;case 67:i="Jtn";break;case 68:i="Dh";break;case 70:i="Dt"}return i}var t=["TGP"];this.isGameGroup=function(n){for(var i=0;i<t.length;i++)if(t[i]===n)return!0;return!1};this.getCategories=function(t){var i=t?{search:t}:{};return n.post("/Game/GetCategories",i).then(function(n){return n.data})};this.getCategoryKey=function(t){return n.post("/Game/GetCategoryId",{categoryName:t}).then(function(n){var t=n.data;return t.IsSuccess===!1?null:t===""?null:t})};this.getGames=function(t,i,r){return n.post("/Game/GetGames",{pageIndex:t,take:i,search:r}).then(function(n){for(var r,t=n.data,i=0;i<t.Games.length;i++)if(t.Games[i].ButtonImagePath="https://cdn.weibo-hk.com/"+t.Games[i].ButtonImagePath,t.Games[i].ImagePlus.length>0)for(r=0;r<t.Games[i].ImagePlus.length;r++)t.Games[i].ImagePlus[r].ImageFilePath="https://cdn.weibo-hk.com/"+t.Games[i].ImagePlus[r].ImageFilePath;return t})};this.getGameInfo=function(n,t){var r=i(n,t);return{action:r.action,supplier:r.supplier}};this.checkGames=function(t){for(var r=[],i=0;i<t.length;i++)r.push(t[i].GId);return n.post("/Game/CheckGames",{gameIds:r}).then(function(n){for(var r,u=n.data,f=[],i=0;i<t.length;i++)for(r=0;r<u.length;r++)t[i].GId===u[r]&&f.push(t[i]);return f})}}return new t}]);app.factory("injectActionService",[function(){return{LoginCtrl:{loginAction:"/Account/Login_O"}}}]);angular.module("slotGame").factory("IntegratedGameService",[function(){var n=function(n){var t="";return angular.forEach(n,function(n,i){t=t+"&"+i+"="+n}),t=t.slice(1,t.length)};return{getIntegratedCategories:function(){},getIntegratedGames:function(){},toIntegratedGame:function(t){var u=n(t.GameIds),e=t.GameSupplierType,f=parseInt(t.GameKind),i,r;switch(e){case 1:i="/Account/LoginToBB?"+u;r="Bb";break;case 6:gamecategory=f===3?36:17;i="/Account/LoginToAg?"+u+"&gamecategory="+gamecategory;r="Ag";break;case 9:case 41:i="/Account/LoginToMg?"+u;r="Mg";break;case 11:case 33:i=f===1?"/Account/LoginToPtGroup?categoryType=0&gamecode="+t.GameIds.GameId:"/Account/LoginToPtGroup?categoryType=1&gamecode="+t.GameIds.GameId;r="Pt";break;case 12:i=f===1?"/Account/LoginToGpiLiveGame?"+u:"/Account/LoginToGpiSlotGame?"+u;r="Gpi";break;case 14:i="/Account/LoginToGns?"+u+"&isFish="+(f===3);r="Gns";break;case 15:i="/Account/LoginToPrg?"+u+"&isMobile=false";r="Prg";break;case 16:i="/Account/LoginToSg?"+u+"&isMobile=false";r="Sg";break;case 25:f===2?i="/Account/LoginToRg2Slot?"+u:f===3?i="/Account/LoginToRg2Fish?"+u:f===4?i="/Account/LoginToRg2Board?"+u:f===6&&(i="/Account/LoginToRg2Lottery?");r="Rg";break;case 26:i="/Account/LoginToJdb?";r="Jdb";break;case 27:i="/Account/LoginToHaba?"+u+"&isMobile=false";r="Haba";break;case 28:i="/Account/LoginToCq9?"+u+"&GamePlat=WEB";r="Cq9";break;case 30:i="/Account/LoginToNetEnt?"+u+"&isMobile=false";r="NetEnt";break;case 32:i="/Account/LoginToGdSlot?";r="Gd";break;case 34:case 39:f===1?(i="/Account/LoginToSunbetLiveBetLimit?"+u,r="Sunbet"):(i="/Account/LoginToRedTiger?"+u+"&isMobile=false",r="RedTiger");break;case 35:i="/Account/LoginToGameArt?"+u;r="GameArt";break;case 36:i="/Account/LoginToMw?"+u;r="Mw";break;case 37:i="/Account/LoginToPg?"+u;r="Pg";break;case 40:i="/Account/LoginToLg?"+u+"&isMobile=false";r="Lg";break;case 42:i="/Account/LoginToIsb?"+u;r="Isb";break;case 43:i="/Account/LoginToKg?"+u+"&isMobile=false";r="Kg";break;case 45:i="/Account/LoginToPts?"+u;r="Pts";break;case 48:i="/Account/LoginToPng?"+u;r="Png";break;case 51:f===3?i="/Account/LoginToCity761Fish?"+u:f===4&&(i="/Account/LoginToCity761Board?"+u+"&isMobile=false");r="City761";break;case 52:f===2?i="/Account/LoginToFsSlot?"+u:f===3?i="/Account/LoginToFsFish?"+u:f===4&&(i="/Account/LoginToFsBoard?"+u);r="Fs";break;case 53:i="/Account/LoginToSa?";r="Sa";break;case 56:i="/Account/LoginToNw?"+u;r="Nw";break;case 57:i="/Account/LoginToKa?";r="Ka";break;case 58:i="/Account/LoginToJs?";r="Js";break;case 59:i="/Account/LoginToGti?";r="Gti";break;case 61:i="/Account/LoginToPls?";r="Pls"}return{action:i+(/\?$/.test(i)?"":"&")+"gid="+t.GId,supplier:r}}}}]);app.factory("labelService",["labels","$parse",function(n,t){return{get:function(i){return t(i)(n)}}}]);app.factory("languageService",["$q","$http",function(n,t){function u(){var n=null;try{n=JSON.parse(sessionStorage.getItem("languageData"))}catch(t){n=!1}return n}function f(){for(var n,i="language=",r=document.cookie.split(";"),t=0,u=r.length;t<u;t++){for(n=r[t];n.charAt(0)==" ";)n=n.substring(1);if(n.indexOf(i)===0)return n.substring(i.length,n.length)}}function e(){return r.promise}function o(n){return $.post("/ChangeLanguage",{language:n})}function s(n){return t.post("/GetMultilingual",n)}function h(n){var t="";switch(n){case"zh-CN":t="NameCn";break;case"zh-TW":t="NameTw";break;case"en-US":t="NameEn";break;case"th":t="NameTh";break;default:t="NameCn"}return t}var i=u(),r=n.defer();return i?r.resolve(i):t.post("/Home/GetLanguages").then(function(n){var t=n.data;i=t;r.resolve(t);sessionStorage.setItem("languageData",JSON.stringify(t))}),{currentLanguage:f(),getLanguageData:e,changeLanguage:o,getMultilingual:s,getLangPropertyName:h}}]);angular.module("liveGame",[]).factory("LiveGameService",[function(){return{toLiveGame:function(n){var t,i;switch(n.GameSupplierType){case 11:case 33:t="/Account/LoginToPtGroup?categoryType=0&gamecode="+n.GameIds.GameId;i="Pt";break;case 12:t="/Account/LoginToGpiLiveGame?gameId="+n.GameIds.GameId;i="Gpi";break;case 34:case 39:t="/Account/LoginToSunbetLiveBetLimit?gameId="+n.GameIds.GameId;i="Sunbet"}return{action:t+(/\?$/.test(t)?"":"&")+"gid="+n.GId,supplier:i}}}}]);angular.module("lobbyNav",[]).factory("LobbyNavService",["$window","$location","LobbyNavSizeService",function(n,t,i){function r(n){return{windowSize:u(n.sizeList,n.type),windowEmbedded:f(n.nonEmbeddedList,n.type)}}function u(n,t){var u=i.getEachSiteSetting(t),r;if(u)return u;for(r=0;r<n.length;r++)n[r].gameSupplierType===t?u=n[r].size:null;return u||n[0].size}function f(n,t){for(var r=!0,i=0;i<n.length;i++)n[i]===t?r=!1:null;return r}function e(n){localStorage.setItem("LobbyNavAction",n);var t=document.createEvent("Event");t.initEvent("setActionEvent",!0,!0);window.dispatchEvent(t)}return{nonEmbeddedList:["Bb","Ag","Ab","Gd","Gns","Gpi","Ig","Jdb","Pt2","Pt3","Pg","Sg","RedTiger","Sunbet","Saba","Sing","Mw2","Kg","Bg","Cmd","Lx","Guide","Im","Png","Og","Rg","Vr","Gpk","City761","Ka","Gti","Pls","Ibo","Ims","EBet","Sa","Ae","Th"],addToNonEmbedded:function(n){this.nonEmbeddedList.indexOf(n)===-1?this.nonEmbeddedList.push(n):null},sizeList:[{gameSupplierType:"Default",size:{width:1300,height:960}},{gameSupplierType:"Png",size:{width:1297,height:838}},{gameSupplierType:"Ka",size:{width:1152,height:707}},{gameSupplierType:"Ae",size:{width:1300,height:787}}],openLobbyNav:function(t,i,u){function p(t){return!l||!n.addEventListener?n.open(t,"_NonEmbedded",c):(e(t),!a)?n.open("/Lobby/Navigation","_lobbyNav",c):n.top}var f=r({type:i,sizeList:this.sizeList,nonEmbeddedList:this.nonEmbeddedList}),l=f.windowEmbedded,a=n.top.location.pathname==="/Lobby/Navigation",o=f.windowSize.width,s=f.windowSize.height,c=["resizable","scrollbars=yes","width="+o,"height="+s].join(","),w=u||"lobby",v=(screen.width-o)/2,y=(screen.height-s)/3,h=p(t);h.resizeTo(o,s);h.moveTo(v,y);h.focus()}}}]);angular.module("lobbyNav").factory("LobbyNavSizeService",[function(){var n=[{gameSupplierType:"Default",size:null}];return{getEachSiteSetting:function(t){for(var r=n[0].size,i=0;i<n.length;i++)n[i].gameSupplierType===t?r=n[i].size:null;return r}}}]);angular.module("lotteryGame",[]).factory("LotteryGameService",[function(){return{toLotteryGame:function(n){var t,i;switch(n.GameSupplierType){case 25:t="/Account/LoginToRg2Lottery?";i="Gpk"}return{action:t+"gid="+n.GId,supplier:i}}}}]);app.factory("MarqueeService",["$http","$q",function(n,t){return{getMarquee:function(){var i=t.defer();return n.post("/Home/GetLastMarquee").then(function(n){i.resolve(n.data)}),i.promise}}}]);app.factory("MeidonTimeService",["$interval","signalrService",function(n,t){function i(){function f(){u=n(function(){i.add(1,"seconds");r=r.set({year:i.get("year"),month:i.get("month"),date:i.get("date"),hour:i.get("hour"),minute:i.get("minute"),second:i.get("second"),millisecond:i.get("millisecond")})},990)}function e(){n.cancel(u)}function o(){e();f()}moment.locale(angular.element(document.getElementsByTagName("html")).attr("moment-lang"));moment.tz.setDefault("Asia/Taipei");var i=moment(angular.element(document.getElementsByTagName("html")).attr("meidon-time").replace(/\//g,"-")),u,r=moment(angular.element(document.getElementsByTagName("html")).attr("meidon-time").replace(/\//g,"-"));f();t.on("updateMeidonNow",function(n){var t=moment(n);i=i.set({year:t.get("year"),month:t.get("month"),date:t.get("date"),hour:t.get("hour"),minute:t.get("minute"),second:t.get("second"),millisecond:t.get("millisecond")});o()});return this.on=function(n){return n(r)},this.getCurrentMeidon=function(){return angular.copy(i)},this.getMeidonToLocal=function(n){var t=4-(new Date).getTimezoneOffset()/60;return n.add(t,"h")},this}return new i}]);app.factory("PaymentService",[function(){function n(){var n=[{Id:1,Type:"General",LangKey:"Online_Payment"},{Id:2,Type:"Point",LangKey:"PointCard_Deposit"},{Id:4,Type:"WeChatPayment",LangKey:"Wechat_Deposit"},{Id:5,Type:"AliPayPayment",LangKey:"AliPay_Deposit"},{Id:8,Type:"QQWalletPayment",LangKey:"QQWallet_Deposit"},{Id:10,Type:"JDPayment",LangKey:"JD_Deposit"},{Id:12,Type:"UnionScanPayment",LangKey:"UnionScanPay_Deposit"},{Id:13,Type:"UnionWalletPayment",LangKey:"UnionWalletPay_Deposit"},{Id:14,Type:"WechatCollectionCodePayment",LangKey:"WechatCollectionCode_Deposit"},{Id:15,Type:"AliPayCollectionCodePayment",LangKey:"AliPayCollectionCode_Deposit"},{Id:16,Type:"QQWalletCollectionCodePayment",LangKey:"QQWalletCollectionCode_Deposit"}];return this.getPaymentByType=function(t){var i;return angular.forEach(n,function(r,u){t===r.Type&&(i=n[u])}),i},this}return new n}]);angular.module("reviewGame",[]).factory("ReviewGameService",function(){return{review:function(n){var t=JSON.parse(localStorage.getItem("reviewGame_0.0.2"))||[],i={ButtonImagePath:n.ButtonImagePath,DisplayName:n.DisplayName,GameIds:n.GameIds,GameSupplierType:n.GameSupplierType,GameKind:n.GameKind,GId:n.GId};t.length>0?(t=$.grep(t,function(n){return parseInt(n.GId)!==parseInt(i.GId)}),t.unshift(i),t.length>25&&t.pop(),localStorage.setItem("reviewGame_0.0.2",JSON.stringify(t))):(t.unshift(i),localStorage.setItem("reviewGame_0.0.2",JSON.stringify(t)))}}}),function(){if($.hubConnection){var n=$.hubConnection(),t=n.createHubProxy("mainHub");t.on("signOut",function(n){if(n)if(angular){var t=angular.element(document.body).injector().get("CustomModalService");t.alert(n).then(function(){location.href="/Account/SignOut"})}else alert(n);location.href="/Account/SignOut"}).on("refresh",function(){location.reload()});app.factory("signalrService",["$rootScope","$q",function(i,r){var u=r.defer();return{connect:function(){n.start().done(function(){u.resolve()})},reconnected:function(t){n.reconnected(function(){var n=arguments;i.$apply(function(){t&&t.apply(this,n)})})},on:function(n,r){u.promise.then(function(){t.on(n,function(){var n=arguments;i.$apply(function(){r&&r.apply(this,n)})});var u=i.$$childTail;u.$on("$destroy",function(){t.off(n)})})},invoke:function(){var n=arguments;u.promise.then(function(){t.invoke.apply(t,n)})},donePromise:u.promise,getConnectionId:function(){return n.id?n.id:""},getConnectionId2:function(){function u(){var u,f,i,e;if(!n.id)return"";for(u=n.id,f=[],i=0;i<u[t("0x0")];i++)e=u[i],f[t("0x1")](String[t("0x2")](e.charCodeAt(0)+i+1));return r(2)+f[t("0x3")]("")+r(2)}function r(n){for(var i=[],r=0;r<n;r++)i[t("0x1")](String[t("0x2")](Math[t("0x4")](Math[t("0x5")]()*6+97)));return i[t("0x3")]("")}var i=["join","floor","random","length","push","fromCharCode"],t;return function(n,t){var i=function(t){while(--t)n.push(n.shift())};i(++t)}(i,381),t=function(n){n=+n;return i[n]},u()}}}])}}();app.factory("SliderService",["$http","$q","$location","$window",function(n,t,i,r){function u(n){return n?n:""}return{getSliderNew:function(){var o=i.search().slideshow?!0:!1,f=t.defer();if(o){r.addEventListener("message",e,!1);r.opener.postMessage("message",i.search().slideshow);function e(n){for(var t=n.data.ReturnObject,i=0;i<t.length;i++)t[i].Link=u(t[i].Link);f.resolve(t);r.removeEventListener("message",e,!1)}}else n.post("/Cdn/GetSliderNew").then(function(n){for(var t=n.data.ReturnObject,i=0;i<t.length;i++)t[i].Link=u(t[i].Link);f.resolve(t)});return f.promise}}}]);angular.module("slotGame").factory("SlotGameService",[function(){var n=function(n){var t="";return angular.forEach(n,function(n,i){t=t+"&"+i+"="+n}),t=t.slice(1,t.length)};return{toSlotGame:function(t){var i,r,u;switch(t.GameSupplierType){case 1:i="/Account/LoginToBB?"+n(t.GameIds);r="Bb";break;case 6:u=parseInt(t.GameIds.lunchGame)===6?36:17;i="/Account/LoginToAg?lunchGame="+t.GameIds.lunchGame+"&gamecategory="+u;r="Ag";break;case 9:case 41:i="/Account/LoginToMg?"+n(t.GameIds);r="Mg";break;case 11:case 33:i="/Account/LoginToPtGroup?categoryType=1&gamecode="+t.GameIds.GameId;r="Pt";break;case 12:i="/Account/LoginToGpiSlotGame?gameId="+t.GameIds.GameId;r="Gpi";break;case 14:i="/Account/LoginToGns?gameId="+t.GameIds.GameId+"&isFish="+(t.GameIds.GameId==="M4-0075");r="Gns";break;case 15:i="/Account/LoginToPrg?gameId="+t.GameIds.GameId+"&isMobile=false";r="Prg";break;case 16:i="/Account/LoginToSg?gameId="+t.GameIds.GameId+"&isMobile=false";r="Sg";break;case 36:i="/Account/LoginToMw?gameId="+t.GameIds.GameId;r="Mw";break;case 27:i="/Account/LoginToHaba?gameId="+t.GameIds.GameId+"&isMobile=false";r="Haba";break;case 26:i="/Account/LoginToJdb?"+n(t.GameIds);r="Jdb";break;case 28:i="/Account/LoginToCq9?"+n(t.GameIds)+"&GamePlat=WEB";r="Cq9";break;case 30:i="/Account/LoginToNetEnt?"+n(t.GameIds)+"&isMobile=false";r="NetEnt";break;case 32:i="/Account/LoginToGdSlot?";r="Gd";break;case 34:case 39:i="/Account/LoginToRedTiger?gameId="+t.GameIds.GameId+"&isMobile=false";r="RedTiger";break;case 35:i="/Account/LoginToGameArt?gameId="+t.GameIds.GameId;r="GameArt";break;case 37:i="/Account/LoginToPg?gameId="+t.GameIds.GameId;r="Pg";break;case 40:i="/Account/LoginToLg?"+n(t.GameIds)+"&isMobile=false";r="Lg";break;case 42:i="/Account/LoginToIsb?gameId="+t.GameIds.GameId;r="Isb";break;case 45:i="/Account/LoginToPts?gameId="+t.GameIds.GameId;r="Pts";break;case 48:i="/Account/LoginToPng?"+n(t.GameIds);r="Png";break;case 52:i="/Account/LoginToFsSlot?"+n(t.GameIds);r="Fs";break;case 53:i="/Account/LoginToSa?";r="Sa";break;case 57:i="/Account/LoginToKa?";r="Ka"}return{action:i+(/\?$/.test(i)?"":"&")+"gid="+t.GId,supplier:r}}}}])