(function(n){n.isScrollToFixed=function(t){return!!n(t).data("ScrollToFixed")};n.ScrollToFixed=function(t,i){function st(){r.trigger("preUnfixed.ScrollToFixed");f();r.trigger("unfixed.ScrollToFixed");l=-1;p=r.offset().top;c=r.offset().left;u.options.offsets&&(c+=r.offset().left-r.position().left);it==-1&&(it=c);e=r.css("position");y=!0;u.options.bottom!=-1&&(r.trigger("preFixed.ScrollToFixed"),k(),r.trigger("fixed.ScrollToFixed"))}function rt(){var n=u.options.limit;return n?typeof n=="function"?n.apply(r):n:0}function a(){return e==="fixed"}function ut(){return e==="absolute"}function s(){return!(a()||ut())}function k(){if(!a()){var n=r[0].getBoundingClientRect();o.css({display:r.css("display"),width:n.width,height:n.height,float:r.css("float")});cssOptions={"z-index":u.options.zIndex,position:"fixed",top:u.options.bottom==-1?w():"",bottom:u.options.bottom==-1?"":u.options.bottom,"margin-left":"0px"};u.options.dontSetWidth||(cssOptions.width=r.css("width"));r.css(cssOptions);r.addClass(u.options.baseClassName);u.options.className&&r.addClass(u.options.className);e="fixed"}}function ft(){var n=rt(),t=c;u.options.removeOffsets&&(t="",n=n-p);cssOptions={position:"absolute",top:n,left:t,"margin-left":"0px",bottom:""};u.options.dontSetWidth||(cssOptions.width=r.css("width"));r.css(cssOptions);e="absolute"}function f(){s()||(l=-1,o.css("display","none"),r.css({"z-index":tt,width:"",position:b,left:"",top:nt,"margin-left":""}),r.removeClass("scroll-to-fixed-fixed"),u.options.className&&r.removeClass(u.options.className),e=null)}function d(n){n!=l&&(r.css("left",c-n),l=n)}function w(){var n=u.options.marginTop;return n?typeof n=="function"?n.apply(r):n:0}function v(){var t,v;if(n.isScrollToFixed(r)&&!r.is(":hidden")){t=y;v=s();y?s()&&(p=r.offset().top,c=r.offset().left):st();var e=n(window).scrollLeft(),o=n(window).scrollTop(),i=rt();u.options.minWidth&&n(window).width()<u.options.minWidth?s()&&t||(h(),r.trigger("preUnfixed.ScrollToFixed"),f(),r.trigger("unfixed.ScrollToFixed")):u.options.maxWidth&&n(window).width()>u.options.maxWidth?s()&&t||(h(),r.trigger("preUnfixed.ScrollToFixed"),f(),r.trigger("unfixed.ScrollToFixed")):u.options.bottom==-1?i>0&&o>=i-w()?v||ut()&&t||(h(),r.trigger("preAbsolute.ScrollToFixed"),ft(),r.trigger("unfixed.ScrollToFixed")):o>=p-w()?(a()&&t||(h(),r.trigger("preFixed.ScrollToFixed"),k(),l=-1,r.trigger("fixed.ScrollToFixed")),d(e)):s()&&t||(h(),r.trigger("preUnfixed.ScrollToFixed"),f(),r.trigger("unfixed.ScrollToFixed")):i>0?o+n(window).height()-r.outerHeight(!0)>=i-(w()||-ht())?a()&&(h(),r.trigger("preUnfixed.ScrollToFixed"),b==="absolute"?ft():f(),r.trigger("unfixed.ScrollToFixed")):(a()||(h(),r.trigger("preFixed.ScrollToFixed"),k()),d(e),r.trigger("fixed.ScrollToFixed")):d(e)}}function ht(){return u.options.bottom?u.options.bottom:0}function h(){var n=r.css("position");n=="absolute"?r.trigger("postAbsolute.ScrollToFixed"):n=="fixed"?r.trigger("postFixed.ScrollToFixed"):r.trigger("postUnfixed.ScrollToFixed")}var u=this;u.$el=n(t);u.el=t;u.$el.data("ScrollToFixed",u);var y=!1,r=u.$el,e,b,ot,nt,tt,p=0,c=0,it=-1,l=-1,o=null;var g=function(){r.is(":visible")?(y=!1,v()):f()},et=function(){!window.requestAnimationFrame?v():requestAnimationFrame(v)},lt=function(){var n=document.body,t,i,r,u,f;return document.createElement&&n&&n.appendChild&&n.removeChild?(t=document.createElement("div"),!t.getBoundingClientRect)?null:(t.innerHTML="x",t.style.cssText="position:fixed;top:100px;",n.appendChild(t),i=n.style.height,r=n.scrollTop,n.style.height="3000px",n.scrollTop=500,u=t.getBoundingClientRect().top,n.style.height=i,f=u===100,n.removeChild(t),n.scrollTop=r,f):null},ct=function(n){n=n||window.event;n.preventDefault&&n.preventDefault();n.returnValue=!1};u.init=function(){u.options=n.extend({},n.ScrollToFixed.defaultOptions,i);tt=r.css("z-index");u.$el.css("z-index",u.options.zIndex);o=n("<div />");e=r.css("position");b=r.css("position");ot=r.css("float");nt=r.css("top");s()&&u.$el.after(o);n(window).bind("resize.ScrollToFixed",g);n(window).bind("scroll.ScrollToFixed",et);"ontouchmove"in window&&n(window).bind("touchmove.ScrollToFixed",v);u.options.preFixed&&r.bind("preFixed.ScrollToFixed",u.options.preFixed);u.options.postFixed&&r.bind("postFixed.ScrollToFixed",u.options.postFixed);u.options.preUnfixed&&r.bind("preUnfixed.ScrollToFixed",u.options.preUnfixed);u.options.postUnfixed&&r.bind("postUnfixed.ScrollToFixed",u.options.postUnfixed);u.options.preAbsolute&&r.bind("preAbsolute.ScrollToFixed",u.options.preAbsolute);u.options.postAbsolute&&r.bind("postAbsolute.ScrollToFixed",u.options.postAbsolute);u.options.fixed&&r.bind("fixed.ScrollToFixed",u.options.fixed);u.options.unfixed&&r.bind("unfixed.ScrollToFixed",u.options.unfixed);u.options.spacerClass&&o.addClass(u.options.spacerClass);r.bind("resize.ScrollToFixed",function(){o.height(r.height())});r.bind("scroll.ScrollToFixed",function(){r.trigger("preUnfixed.ScrollToFixed");f();r.trigger("unfixed.ScrollToFixed");v()});r.bind("detach.ScrollToFixed",function(t){ct(t);r.trigger("preUnfixed.ScrollToFixed");f();r.trigger("unfixed.ScrollToFixed");n(window).unbind("resize.ScrollToFixed",g);n(window).unbind("scroll.ScrollToFixed",et);r.unbind(".ScrollToFixed");o.remove();u.$el.removeData("ScrollToFixed")});g()};u.init()};n.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3,baseClassName:"scroll-to-fixed-fixed"};n.fn.scrollToFixed=function(t){return this.each(function(){new n.ScrollToFixed(this,t)})}})(jQuery);app.directive("accordionSlider",["$compile",function(n){var t={pagerIndex:0,pagerSum:0,displaySlides:0,slidesSum:0,slideName:[],pagerHtml:"",slideState:[],changeSlide:{}},r=function(n,t){return n-(t-1)},u=function(n){var u=/\$\{pageID\}/g,e=n.pagerHtml,f="<span ng-click=\"changePager(${pageID})\" ng-class=\"{'active':selectPager=='${pageID}'}\"><\/span>",i=">",r=Math.ceil(n.slidesSum/n.displaySlides),t;for(n.pagerSum=r,t=0;t<r;t++){if(t+1===r)return i=i+f.replace(u,t)+"<",n.pagerHtml.replace(/\>\</,i);i=i+f.replace(u,t)}},i=function(n){var f=t.pagerIndex,i,u;for(t.pagerIndex=n,i=n*t.displaySlides,n+1===t.pagerSum&&(i=r(t.slidesSum,t.displaySlides)-1),u=0;u<t.slideState.length;u++)t.slideState[u]=u===i||u>i&&u<i+t.displaySlides?!0:!1,u+1===t.slideState.length&&(f>t.pagerIndex&&(i=i+t.displaySlides-1),t.changeSlide(i))};return{restrict:"A",link:function(r,f,e){var v=parseInt(e.accordionDisplaySlide||7,10),o=e.accordionSlideTag||"li.slide",c=e.accordionPagerTag||".pagers",k=e.accordionActive||"active",l=e.accordionUnactive||"unactive",y=e.accordionAttrName||"silde-name",p=e.accordionScopeName||"selectItem",w=parseInt(e.accordionHoverWidth,10)||260,s=angular.element(f),h=angular.element(f.find(o)),b=angular.element(f.find(c))[0].outerHTML,a;t={pagerIndex:0,displaySlides:v,slidesSum:h.length,pagerHtml:b,slideName:[],slideState:[],changeSlide:function(n){r.selectPager=t.pagerIndex;for(var i=0;i<t.slideState.length;i++)t.slideState[i]?angular.element(f.find(o)[i]).removeClass(l):angular.element(f.find(o)[i]).addClass(l);r[p]=t.slideName[n]}},function(n){for(var i=0;i<n.length;i++)t.slideName.push(n[i].attributes[y].value),t.slideState.push(!1)}(h);s.css({width:w*h.length+"px"});angular.element(s.parent()).css({overflow:"hidden"});r.changePager=i;angular.element(f.find(c)).remove();a=u(t);s.append(angular.element(n(a)(r)));i(0)}}}]);app.directive("activitySwitch",["$interval","MeidonTimeService",function(n,t){return{restrict:"A",link:function(i,r,u){if(u.endTime){var e=$(r)[0].hasAttribute("start-time")?moment(u.startTime.replace(/\//g,"-")).unix():0,o=/^\d{4}\/\d{2}\/\d{2}$/.test(u.endTime)?moment(u.endTime.replace(/\//g,"-")+" 23:59:59").unix():moment(u.endTime.replace(/\//g,"-")).unix(),f,s,h=!0,c=function(){f=t.getCurrentMeidon().unix();switch(!0){case f<e:r.addClass("notStart");break;case f>=e&&f<o:r.removeClass("notStart");r.addClass("inProgress");break;case f>=o:r.removeClass("inProgress");r.addClass("overdue");n.cancel(s);h=!1}};c();h&&(s=n(c,990))}}}}]);app.directive("announcementDialog",["$filter","$window","$timeout","$location","AnnouncementService","labelService","_env",function(n,t,i,r,u,f,e){var o=e.AnnouncementDialog||{},s=o.PopupPages||["/"];return{scope:{oneTimeDelayClose:"@"},restrict:"A",template:'<div class="modal-overlay" ng-class="{\'modal-show\': enable}"><\/div><div class="modal-announcement" ng-class="{\'modal-show\': enable, \'single-content\': isSingleAnnouncement}"><div class="ma-noshow"><label><input type="checkbox" ng-model="noShowAgain"><span ng-bind="noShowLabel"><\/span><\/label><\/div><div class="ma-title"><i class="fal fa-2x fa-times-circle" ng-click="close()"><\/i><span ng-bind-html="header|trustAsHtml"><\/span><\/div><div class="ma-body"><section class="ma-sidebar"><ul><li ng-repeat="item in list" ng-class="{\'active\': item.active}" ng-mouseover="onTitleClick(item)" title="{{item.title}}"><i class="fas fa-comment-dots"><\/i><span ng-bind="item.title"><\/span><i class="fa fa-chevron-right"><\/i><\/li><\/ul><\/section><section class="ma-content" ng-bind-html="content|trustAsHtml"><\/section><\/div><div class="ma-footer"><\/div><\/div>',link:function(e,o,h){e.enable=!1;e.isSingleAnnouncement=!0;e.header=f.get("Announcement.Announcement")||"平台公告";e.noShowLabel=f.get("Announcement.NoShowAgain")||"不再显示";e.list=[];e.close=function(){e.noShowAgain?u.recordNeverPopupTimes():u.uncheckNeverPopup();e.enable=!1};e.onTitleClick=function(t){angular.forEach(e.list,function(n){n.active=!1});t.active=!0;e.content=n("unwrapImage")(t.content)};e.toggle=function(){e.enable=!e.enable};e.$on("modalAnnouncement",function(n,t){var i=t;if(e.list.length>0)e.onTitleClick(e.list[i]);e.toggle()});e._listHandler=function(n){n.PopupHeader&&(e.header=n.PopupHeader);e.list=n.List;e.isSingleAnnouncement=e.list.length<=1};e._versionHandler=function(n){if(e.list.length>0)e.onTitleClick(e.list[0]);n&&u.uncheckNeverPopup();e.noShowAgain=u.checkNeverPopupCookieExist();e.enable=e.list.length>0&&n;e.enable&&parseInt(h.oneTimeDelayClose,10)>0&&i(function(){e.close()},parseInt(h.oneTimeDelayClose))};r.search().announcement?u.addPreviewListener(function(n){e._listHandler(n.content);e._versionHandler(!0)}):u.getListSingleton().then(function(n){e._listHandler(n);var i=s.filter(function(n){return n===t.location.pathname}).length;return i===0?!1:u.checkVersion()}).then(e._versionHandler);e.$on("showModalAnnouncement",function(n,t){var i=t||0;e.onTitleClick(e.list[i]);e.enable=!0});e.$on("hideModalAnnouncement",function(){e.enable=!1})}}}]);app.directive("automaticSubnav",[function(){return{restrict:"A",link:function(n,t,i){function r(n){return parseInt(n.css("padding-left"),10)+parseInt(n.css("padding-right"),10)+parseInt(n.css("border-left-width"),10)+parseInt(n.css("border-right-width"),10)}function f(n,t){n.css("width",t+"px");e(n)}function e(n){(n.attr("automatic-align")==="false"?!1:!0)&&n.css({left:"50%","margin-left":"-"+n.outerWidth()/2+"px"});o(n)}function o(n){n.addClass("extension-show-block")}var u=angular.element(document.querySelectorAll(".subnav")),s=i.automaticVis||1;if(angular.forEach(u,function(n){var i=angular.element(n),u=i.children("ol")||0,e=0,h=i.attr("automatic-width")==="false"?!1:!0,l,c,o;if(i.closest("li").addClass("extension-position-relative"),t[0].hasAttribute("automatic-vis"))l=i.attr("automatic-vis")||s,e=h?i.find("li").outerWidth(!0)*l+r(i):parseInt(i.css("width"),10),f(i,e);else if(u.length===0||u===0)e=h?i.children("li").outerWidth(!0)+r(i):parseInt(i.css("width"),10),f(i,e);else{if(h){for(c=0,o=0;o<u.length;o++)c+=parseInt(u.css("width"),10)?parseInt($(u[o]).outerWidth(!0),10):u.find("li").outerWidth(!0)+r(u)+$(u[o]).outerWidth(!0);e=r(i)+c}else e=parseInt(i.css("width"),10);f(i,e)}}),i.automaticSubnav)switch(i.automaticSubnav){case"slide":(function(){u.removeClass("extension-show-block").parent().addClass("has-menu");t.slide({type:"menu",titCell:".has-menu",targetCell:".subnav",effect:"slideDown",delayTime:parseInt(t.attr("automatic-time"),10)||300})})();break;case"rotate":(function(){u.addClass("extension-rotate-effect");$(function(){u.css("display","block")})})()}}}}]);app.directive("bindHtmlCompile",["$compile",function(n){return{restrict:"A",scope:{},link:function(t,i,r){var u=r.bindHtmlCompile;u&&(i.html(u),n(i.contents())(t))}}}]);app.directive("capitalize",[function(){return{restrict:"A",require:"?ngModel",link:function(n,t,i,r){function u(n){if(n){var t=n.toUpperCase();return t!=n&&(r.$setViewValue(t),r.$render()),t}}r&&r.$parsers.push(u)}}}]);app.directive("carouselSlider",["$timeout","$compile",function(n,t){var i=[],r=!0;return{restrict:"A",priority:451,compile:function(){return{pre:function(n,t,r){r.ngInit&&(i.push(r.ngInit),r.ngInit="")},post:function(n,u,f){$(u).slide({mainCell:".main-cell >",autoPage:!1,effect:f.superEffect||"leftLoop",autoPlay:!(f.superPlay==="false"),vis:parseInt(f.superVis)||5,trigger:"click",interTime:parseInt(f.superInterTime)||2500,delayTime:parseInt(f.superDelayTime)||500,mouseOverStop:!1,opp:!1,startFun:function(u,f,e,o,s){var h,c;if(r){for(h=0;h<i.length;h++)n.$eval(i[h]);r=!1}c=t(s.html())(n);s.empty().append(c)}})}}}}}]);app.directive("checkcodeDisplay",["$parse","captchaService",function(n,t){return{restrict:"A",link:function(i,r,u){var o=n(u.checkcodeDisplay),s=o.assign,h=u.checkcodeType,e=!0,f=function(){e&&(e=!1,t.post(h).then(function(n){n&&s(i,{encrypt:n.checkCodeEncrypt,image:n.image});e=!0}))};$(window).on("load",f);$(r).next("img").on("click",f);i.$on("$destroy",function(){$(window).off("load",f);$(r).next("img").off("click",f)})}}}]);app.directive("checkcodeRetriever",["$parse","captchaService",function(n,t){return{restrict:"A",link:function(i,r,u){var o=n(u.checkcodeRetriever),s=o.assign,h=u.checkcodeType,e=!0,f=function(){e&&(e=!1,t.post(h).then(function(n){n&&s(i,{encrypt:n.checkCodeEncrypt,image:n.image});e=!0}))};r.on("focus",f);r.on("mousedown",f);i.$on("$destroy",function(){r.off("focus",f);r.off("mousedown",f)})}}}]);app.directive("closePopupOnClick",["$window",function(n){return{restrict:"A",link:function(t,i){i.on("click",function(){n.close()});t.$on("$destroy",function(){i.off("click")})}}}]);app.directive("customAlert",["CustomModalService",function(n){return{restrict:"A",link:function(t,i,r){msg=r.alertMsg?r.alertMsg:"";i.click(function(){n.alert(msg)})}}}]);app.directive("customPagination",[function(){return{scope:{totalItems:"=",itemsPerPage:"=",clickCallback:"&"},restrict:"A",template:'<ul><li class="custom-pagination-btn prev-page" ng-class="{\'disabled\': page === 1}" ng-click="selectPage(page - 1)"><<\/li><li class="custom-pagination-btn page" ng-repeat="page in viewPages track by $index" ng-class="{\'active\': page.active}" ng-click="selectPage(page.number)">{{page.text}}<\/li><li class="custom-pagination-btn next-page" ng-class="{\'disabled\': page === totalPages}" ng-click="selectPage(page + 1)">><\/li><\/ul>',link:function(n){function t(n,t,i){return{number:n,text:t,active:i}}function i(n,i){for(var f,u=[],e=i,r=1;r<=e;r++)f=t(r,r,r===n),u.push(f);return u}function r(t){angular.forEach(n.pages,function(n){n.active=n.number===t})}n.page=1;n.totalPages=Math.ceil(n.totalItems/n.itemsPerPage);n.pages=i(n.page,n.totalPages);n.viewPages=n.pages.slice(0,n.itemsPerPage);n.selectPage=function(t){var i,u;t<1||t>n.totalPages||(n.page=t,r(t),t<n.viewPages[0].number?(i=n.viewPages[0].number-1-n.itemsPerPage,u=n.viewPages[0].number-1,n.viewPages=n.pages.slice(i,u)):t>n.viewPages[n.viewPages.length-1].number&&(i=n.viewPages[n.viewPages.length-1].number,u=n.viewPages[n.viewPages.length-1].number+n.itemsPerPage,n.viewPages=n.pages.slice(i,u)),n.clickCallback()(t-1))}}}}]);app.directive("datepicker",["$timeout","$parse",function(n,t){var i=angular.copy($.fn.datepicker.defaults);return{restrict:"A",require:"?^ngModel",scope:{value:"&datepickerSetValue"},link:function(r,u,f){var l=t(f.ngModel),o=l.assign,e=f.datepickerOptions,h,s,c;if(e&&(e=e.replace(/'/g,'"'),e=angular.fromJson(e)),e=angular.extend(angular.copy(i),e||{}),h=$(u).datepicker(e),this.value=null,s=this,c=r.$watch("value",function(t){var i=t()||null;angular.equals(i,s.value)||(s.value=i,$(u).datepicker("setValue",i),o&&n(function(){o(r.$parent,$(u).val())}))}),o)h.on("changeDate",function(){var n=$(u).val();o(r.$parent,n)});r.$on("$destroy",function(){c()})}}}]);app.directive("datepickerui",["$parse",function(n){return function(t,i,r){var u=n(r.ngModel);$(i).datepicker({inline:!0,dayNames:["日","一","二","三","四","五","六"],dayNamesMin:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],altFormat:"yy/mm/dd",dateFormat:"yy/mm/dd",changeYear:!0,changeMonth:!0,yearRange:"1900:",showOptions:{direction:"up"},onSelect:function(n){t.$apply(function(t){u.assign(t,n)})}})}}]);app.directive("datetimepicker",["$parse",function(n){return function(t,i,r){var u=n(r.ngModel);$(i).datetimepicker({lang:"zh",format:"Y/m/d H:i:s",step:30,defaultSelect:!0,timepickerScrollbar:!1})}}]);app.directive("digital",["$interval",function(n){function t(n,t){return Math.floor(Math.random()*(t-n+1)+n)}return{restrict:"AE",link:function(i,r,u){var e=parseInt(u.digitalMin),c=parseInt(u.digitalMax),l=parseInt(u.time)?parseInt(u.time):t(1e3,5e3),s=u.word?u.word:"",f=$(r)[0].hasAttribute("not-point")?"":"."+t(10,99),h=$(r)[0].hasAttribute("one-digital"),a=parseInt(u.addMin)?parseInt(u.addMin):1,v=parseInt(u.addMax)?parseInt(u.addMax):10,o;o=$(r)[0].hasAttribute("not-thousandth")?function(n){return n}:function(n){for(var t=n.toString(),i=/(\d+)(\d{3})/;i.test(t);)t=t.replace(i,"$1,$2");return t};h&&(f="."+t(1,9));$(r)[0].hasAttribute("add")?($(r).html(s+o(e)+f),n(function(){var n=t(a,v);e+=n;f=$(r)[0].hasAttribute("not-point")?"":h?"."+t(1,9):"."+t(10,99);$(r).html(s+o(e)+f)},l)):($(r).html(s+o(t(e,c))+f),n(function(){f=$(r)[0].hasAttribute("not-point")?"":h?"."+t(1,9):"."+t(10,99);$(r).html(s+o(t(e,c))+f)},l))}}}]);app.directive("digitalRule",["$interval",function(n){return String.prototype.repeat||(String.prototype.repeat=function(n){"use strict";var t,i;if(this===null)throw new TypeError("can't convert "+this+" to object");if(t=""+this,n=+n,n!==n&&(n=0),n<0)throw new RangeError("repeat count must be non-negative");if(n===Infinity)throw new RangeError("repeat count must be less than infinity");if(n=Math.floor(n),t.length===0||n===0)return"";for(i=t.length*n,n=Math.floor(Math.log(n)/Math.log(2));n;)t+=t,n--;return t+t.substring(0,i-t.length)}),{link:function(t,i,r){function y(){(f=(""+f).charCodeAt(0),o=(""+o).charCodeAt(0),f>o)||(u=h?0:f,c=n(p,v))}function p(){h?(i.text(e[u]),u=u===e.length-1?0:u+1):(l=String.fromCharCode(u),i.text(l.repeat(a)),u=u===o?f:u+1)}var s=r.digitalRule?r.digitalRule:"default",a=r.digitalRuleNumber?parseInt(r.digitalRuleNumber):1,v=r.digitalRuleTime?parseInt(r.digitalRuleTime):1e3,c,e,f,o,u,l,h;switch(!0){case s==="default":f=0;o=9;break;case/^(\d|[a-z]){1}\-(\d|[a-z]){1}$/gi.test(s):e=s.match(/\d|[a-z]/gi);f=e[0];o=e[1];break;case/(\w|\.|\:)*\,(\w|\.|\:)*/gi.test(s):e=s.split(",");h=!0;break;default:return}y();i.on("$destroy",function(){n.cancel(c)})}}}]);app.directive("directOpenPage",[function(){return{restrict:"A",link:function(n){var i=window.location.search.split("?")[1],t=i.split("=");n[t[0]]=t[1]}}}]);app.directive("disableOnSubmit",[function(){return{restrict:"A",link:function(n,t,i){var r=i.disableOnSubmit,u=t.parents("form"),f;if(u.length){f=u[0];$(f).on("submit",function(){if(t.attr("disabled","disabled"),r){var n=$(t).children("span");n&&n.length?n.text(r):t.text(r)}})}}}}]);app.directive("equalOrLessThan",function(){return{restrict:"A",require:"?ngModel",link:function(n,t,i,r){function u(t){var u=n.$eval(i.equalOrLessThan);return(angular.isNumber(u)||(u=Infinity),!r.$isEmpty(t)&&t>u)?(r.$setValidity("equalOrLessThan",!1),undefined):(r.$pristine||r.$setValidity("equalOrLessThan",!0),t)}r&&r.$parsers.push(u)}}});app.directive("equalOrMoreThan",function(){return{restrict:"A",require:"?ngModel",link:function(n,t,i,r){function u(t){var u=n.$eval(i.equalOrMoreThan);return(angular.isNumber(u)||(u=-Infinity),!r.$isEmpty(t)&&t<u)?(r.$setValidity("equalOrMoreThan",!1),undefined):(r.$pristine||r.$setValidity("equalOrMoreThan",!0),t)}r&&r.$parsers.push(u)}}});app.directive("externalPayment",["ExternalPaymentService","$window",function(n){return{restrict:"A",link:function(t,i,r){n.GetExternalPayment().then(function(n){t.externalPayment=n;t.externalPayment!==""?angular.element(i).css("display",r.externalPaymentDisplay?r.externalPaymentDisplay:"block"):angular.element(i).remove()});i.children('p[ng-bind="externalPayment.Description"]').css({"white-space":"pre-wrap","word-break":"break-all"})}}}]);app.directive("floatServiceTop",[function(){return{restrict:"A",link:function(n,t,i){function r(n){t.addClass("float-fixed-service").addClass("extension-position-"+n);t.find(".closed").addClass("float-fixed-closed").addClass("extension-position-"+n);var r=t.children(i.floatServiceTop);if(t[0].hasAttribute("float-animation")){r.addClass("float-element-default");return}r.addClass("element-animation-"+n);r.addClass("extension-height-zero");t.on({mouseenter:function(){r.addClass("element-animation-start");r.removeClass("extension-height-zero")},mouseleave:function(){r.addClass("extension-height-zero");r.removeClass("element-animation-start")}})}var u=i.floatPosition||"left";t.hide();$(function(){t.show();r(u)})}}}]);app.directive("focusOn",["$timeout","$parse",function(n,t){return{restrict:"A",link:function(i,r,u){function a(){var t=h(i),u=l(i);angular.isString(t)&&angular.equals(t,o)&&!angular.equals(t,u)&&(e(i,t),n(function(){r[0].focus()}))}var o=u.name,f;if(o){var s=u.focusOn+".target",h=t(s),v=h.assign,c=u.focusOn+"._focused",l=t(c),e=l.assign;e(i,null);t(u.focusOn+".focus").assign(i,function(t){n(function(){e(i,null);v(i,t)})});f=[];f.push(i.$watch(s,a));f.push(i.$watch(c,a));i.$on("$destroy",function(){angular.forEach(f,function(n){n()})})}}}}]);app.directive("freeMovielink",["$http","$rootScope","$timeout","CustomModalService",function(n,t,i,r){return{restrict:"A",link:function(u,f){function e(){n.post("/GetSiteMasterCustomLink").then(function(n){var t=n.data;f.click(function(){if(t.IsSuccess==!1){r.alertError(t.ErrorMessage);return}window.open(t.Link)})})}i(function(){t.user&&e()})}}}]);app.directive("fromNow",["$timeout",function(n){return{scope:{fromNow:"="},link:function(t,i){function f(){var t=moment(new Date($("html").attr("meidon-time")));i.text(moment(u).from(t));r=n(f,6e4)}var r,u;t.$watch("fromNow",function(t){t&&(r&&(n.cancel(r),r=null),u=t,f())})}}}]);app.directive("historyScrolled",["$window","$timeout",function(n,t){return{restrict:"A",link:function(i,r,u){var e=null,f=angular.element(n),o=function(){if(!i.complete&&!e){var n=f.height()+f.scrollTop(),o=r.offset().top+r.height(),s=o-n,h=s<=f.height();h&&(e=t(function(){i.$apply(u.historyScrolled);e=null}))}};f.on("scroll",o);i.$on("$destroy",function(){return f.off("scroll",o)})}}}]);app.directive("iframeAutoHeight",["$interval",function(n){return{restrict:"A",scope:{},link:function(t,i,r){function s(){var i=$(u).contents().find("body"),r;i.length!==0&&(t.count===-1&&i.css("overflow","hidden"),r=i.height(),parseInt(u.height)===r?(t.count++,t.count>o&&(i.css("overflow","auto"),n.cancel(f))):t.count=0,u.height=parseInt(r))}var e=parseInt(r.resizeTime)?parseInt(r.resizeTime):200,o=parseInt(r.resizeCount)?parseInt(r.resizeCount):100,u=$(i).get(0),f;t.count=-1;f=n(s,e)}}}]);app.directive("leaderboard",["$compile","actionService",function(n,t){var i=function(n){var t=function(){var t='<ul class="head">';for(var r in n.head)t=t+i("head-"+r,n.head[r]);return t+"<\/ul>"},i=function(n,t){return'<li class="'+n+'">'+t+"<\/li>"},r=function(){for(var t='<ul class="list">',i=0;i<n.list.length;i++)t=t+u(n.list[i]);return t+"<\/ul>"},u=function(n){var t="<li><div>";for(var i in n)t=t+f("term-"+i,n[i]);return t+"<\/div><\/li>"},f=function(n,t){return'<span class="'+n+'">'+t+"<\/span>"};return t()+r()};return{restrict:"EA",scope:!1,link:function(r,u,f){var e={itemClass:".leaderboard-instance",fx:f.leaderboardFx||"carousel",carouselVertical:f.leaderboardCarouselVertical==="false"?!1:!0,timeout:parseInt(f.leaderboardTimeout||"1"),slides:"> li",easing:"linear",speed:parseInt(f.leaderboardSpeed||"2000"),pauseOnHover:f.leaderboardPauseOnHover==="false"?!1:!0,head:{account:f.account||"游戏帐号",gameName:f.gameName||"游戏名称",amount:f.betAmount||"下注金额",payoff:f.payoff||"派彩金额"},list:[],triggerCycle:function(){var n={fx:this.fx,carouselVertical:this.carouselVertical,timeout:this.timeout,slides:"> li",speed:this.speed,random:!0,pauseOnHover:this.pauseOnHover};this.easing&&(n.easing=this.easing);this.carouselVisible&&(n.carouselVisible=this.carouselVisible);$(this.itemClass+" > ul.list").cycle(n)}};f.leaderboardCarouselVertical&&(e.carouselVisible=f.leaderboardCarouselVertical);u.addClass(e.itemClass.replace(/\./,""));t.POST("getLeaderboard").then(function(f){e.list=f.data;t.addLibrary("jquery.cycle2.carousel.js").then(function(){u.append(angular.element(n(i(e))(r)));e.triggerCycle()},function(){u.append(angular.element(n(i(e))(r)));e.triggerCycle()})})}}}]);app.directive("lineChatClick",["$window","ContactInfoService","_env",function(n,t,i){return{restrict:"A",scope:{},link:function(r,u,f){function s(){var r=(new Date).getTime(),u=e.lineChat.target,h=e.lineChat.width,c=e.lineChat.height,i=o[f.lineChatClick]||o[e.lineChat.cdnKey]||o.Live800Link,s,t;i+=i.indexOf("?")!==-1?"&_="+r:"?_="+r;s=u==="_blank"?"":"width="+h+",height="+c;t=n.open(i,u,s);e.lineChat.fullScreen&&(t.moveTo(0,0),t.resizeTo(screen.width,screen.height));t.focus()}var e=i.LayoutCtrl,o={};t.getContactInfo().then(function(n){o=n;u.bind("click",s)})}}}]);app.directive("loginBb",["$http","$window","CustomModalService",function(n,t,i){var r=null;return{restrict:"A",link:function(u,f,e){var o=(e.loginBb?e.loginBb.toLowerCase():null)==="true";if(!o){f.addClass("disabled");return}f.on("click",function(){var f,u,e;if(o){if(r&&!r.closed){r.focus();return}f=r=null;u=null;try{f=r=t.open("","bblobby","resizable,scrollbars=yes");f.focus();u=f.document}catch(s){return}u.writeln('<html><head><title><\/title><\/head><body><form id="form" style="display: none;"><\/form><\/body><\/html>');u.close();e=u.getElementById("form");n.post("/Account/LoginToBB").then(function(n){var t=n.data,r,o,s,i;if(t.IsSuccess){r=t.ReturnObject.ParameterList;for(o in r)s=r[o],s&&(i=u.createElement("input"),$(i).attr("name",o),$(i).attr("value",s),e.appendChild(i));$(e).attr("action",t.ReturnObject.Url);$(e).submit()}else f.location.href=t.Url})}else i.alert("尚未登入")})}}}]);app.directive("meidonCountdown",["$interval","MeidonTimeService","labelService",function(n,t,i){return{restrict:"A",scope:{endtime:"@",endFn:"&"},link:function(r,u,f){function c(n){var t=Math.floor(moment.duration(n).asDays()),i=""+o(moment.duration(n).get("hours")),r=""+o(moment.duration(n).get("minutes")),u=""+o(moment.duration(n).get("seconds"));a(t,i,r,u)}function o(n){return parseInt(n)<10?"0"+n:n}function a(n,t,r,f){if(n>0){u.html('<div class="day-mode '+(n>999?"large-amount":"")+'">    <span class="remain">'+(i.get("MeidonCountdown.Countdown")||"倒数")+"        <span>"+n+"<\/span>    "+(i.get("MeidonCountdown.Day")||"天")+"<\/span><\/div>");return}var e='<div>    <span class="hour">        <span class="unit">'+t[0]+'<\/span>        <span class="unit">'+t[1]+'<\/span>    <\/span>    <span class="separate">:<\/span>    <span class="minute">        <span class="unit">'+r[0]+'<\/span>        <span class="unit">'+r[1]+'<\/span>    <\/span>    <span class="separate">:<\/span>    <span class="second">        <span class="unit">'+f[0]+'<\/span>        <span class="unit">'+f[1]+"<\/span>    <\/span><\/div>";u.html(e)}var s=t.getCurrentMeidon(),l=f.endtime?moment(f.endtime):s,e=l.diff(s),h;c(e);h=n(function(){if(e=e-990,e<=0){n.cancel(h);f.endFn?r.endFn():null;return}c(e)},990)}}}]);app.directive("navActive",["$location",function(n){return{restrict:"A",link:function(t,i){t.location=n;var r=i.attr("href");r===location.pathname?i.parent().addClass("active"):i.parent().removeClass("active")}}}]);app.directive("newsManual",["$compile","$timeout","MarqueeService",function(n,t,i){return{restrict:"A",link:function(r,u,f){function l(){u.append('<div class="main-cell"><ul class="news-list" ng-click="newsClick()"><li ng-repeat="news in newsList track by $index">{{news}}<\/li><\/ul><\/div>');n(u.contents())(r)}function a(){t(function(){h?u.slide({mainCell:".main-cell >",effect:o==="up"?"topLoop":"leftLoop",autoPlay:!0,vis:1,trigger:"click",interTime:e||4e3,prevCell:".news-prev",nextCell:".news-next"}):u.children(".main-cell").marquee({duration:e||12500,gap:50,delayBeforeStart:0,direction:o,duplicated:!1,pauseOnHover:!0})})}var o=f.hasOwnProperty("newsUp")?"up":"left",e=parseInt(f.newsSpeed),s=f.newsAssign,h=f.hasOwnProperty("newsPager"),c=location.pathname==="/"?"/home":location.pathname.toLowerCase();s&&s.split(" ").forEach(function(n){if(c==="/"+n.split("-")[0])return o=n.split("-")[1]||"left",e=parseInt(n.split("-")[2])||e,!1});i.getMarquee().then(function(n){r.newsList=n;l();a()})}}}]);app.directive("newsMarquee",["$timeout","$rootScope","$q","$location","MarqueeService","AnnouncementService",function(n,t,i,r,u,f){return{restrict:"A",transclude:!0,template:'<div class="main-cell"><ul class="news-list"><li ng-repeat="news in newsList track by $index" ng-click="newsClick($index)" ng-bind="news"><\/li><\/ul><\/div><div class="option-wrapper" ng-transclude><\/div>',link:function(r,e,o){function p(){n(function(){a?e.slide({mainCell:".main-cell >",effect:h==="up"?"topLoop":"leftLoop",autoPlay:!0,vis:1,trigger:"click",interTime:s||4e3,prevCell:".news-prev",nextCell:".news-next"}):e.children(".main-cell").marquee({duration:s||12500,gap:50,delayBeforeStart:0,direction:h,duplicated:!1,pauseOnHover:!0})})}var h=o.hasOwnProperty("newsUp")?"up":"left",s=parseInt(o.newsSpeed),c=o.newsAssign,a=o.hasOwnProperty("newsPager"),v=location.pathname==="/"?"/home":location.pathname.toLowerCase(),l,y;c&&c.split(" ").forEach(function(n){if(v==="/"+n.split("-")[0])return h=n.split("-")[1]||"left",s=parseInt(n.split("-")[2])||s,!1});l=[u.getMarquee(),f.getListSingleton(),f.getSettingSingleton()];y=i.defer();i.all(l).then(function(n){var i=n[0],u=n[1].List;u.length===0?r.newsList=i:(r.newsList=n[2],r.newsClick=function(n){t.$broadcast("modalAnnouncement",n)});p()})}}}]);app.directive("numeral",["$interval",function(n){function t(n,t){return Math.floor(Math.random()*(t-n+1)+n)}return{restrict:"A",link:function(i,r,u){function v(){return b===1?t(1,9):t(10,99)}function e(n){return a==="timepiece"&&d?n.toFixed(b).toString():a==="timepiece"?n.toFixed(b).toString().replace(/\B(?=(?:\d{3})+(?!\d))/g,","):d?n:n.toString().replace(/\B(?=(?:\d{3})+(?!\d))/g,",")}function h(n){var i,f,t;if(nt)for(i=n.split(""),f=parseInt(u.giveSpan,10),t=f||i.length;t>0;t--)r.find('span[data-numeralbox="'+t+'"]').html(i.pop());else r.html(n)}function y(n){for(var i=n.length,f=parseInt(u.giveSpan,10)||i,t=0;t<f;t++)r.append("<span data-numeralbox="+(t+1)+"><\/span>")}function rt(){function i(){var u=n.getItem(t).originalFrom,i=c,e=n.getItem(t).itemMode,r=a;u!==i||e!==r?(n.clearItem(t),n.setItem(t,o,i,r)):f=n.getItem(t).itemName}var n={setItem:function(n,t,i,r){var u=new Date;localStorage[n]=JSON.stringify({itemName:t,originalFrom:i,expires:u.getTime()+it*36e5,itemMode:r})},getItem:function(n){if(typeof localStorage[n]!="undefined"){var t=JSON.parse(localStorage[n]);return!t||t.expires<Date.now()?null:t}return null},clearItem:function(n){localStorage.removeItem(n)}},t=u.memoryKey||"numeral-storage",r=n.getItem(t);r?i():n.setItem(t,o,c,a);window.addEventListener("beforeunload",function(i){i.preventDefault();a!=="timepiece"&&n.setItem(t,o,c,a);var r=Math.floor(o);n.setItem(t,r,c,a)})}function ut(){function nt(){var a=f,n=t(c,l),r=function(){i<c?i=c:i>l&&(i=l)},u=function(){w?h(s+e(i)):h(s+e(i)+"."+v())};a>n?(i=i-t(d,g),r(),u(),f=n,o=i):(i=i+t(d,g),r(),u(),f=n,o=i)}var a=parseInt(u.gapCustomized,10)||0,i=a||t(f,k),b=r[0].hasAttribute("gap-random")?!0:!1,d=parseInt(u.gapMin,10)||0,g=parseInt(u.gapMax,10)||0,tt,it;(a<f||a>k)&&(i=f);tt=function(){b?(nt(),o=i):(i=t(c,l),h(s+e(i)),o=i)};it=function(){b?(nt(),o=i):(i=t(c,l),h(s+e(i)+"."+v()),o=i)};w?(y(s+e(i)),h(s+e(i)),f=i,n(tt,p)):(y(s+e(i)+"."+v()),h(s+e(i)+"."+v()),n(it,p))}function ft(){var n=function(){function d(){n+=k;c++;o=n;h(e(n));c>=s&&(clearInterval(t),n=p)}var a=r[0].hasAttribute("numeral-to")?u.numeralTo.length:-1,v=f||0,p=l||0,i=5,w=parseInt(u.speed,10)||function b(n){var t=10;return n===0?t:t*b(n-1)}(a+1),s=Math.ceil(w/i),k=(l-f)/s,c=0,n=v,t;t&&clearInterval(t);y(e(l));t=setInterval(d,i)};n()}function g(){var a=parseInt(u.addMin)||1,b=parseInt(u.addMax)||10,k=r[0].hasAttribute("mix"),i=1,d=parseInt(u.mixCycle,10)||t(3,8),g=parseInt(u.mixMin)||1,nt=parseInt(u.mixMax)||10,c=0,l=function(){i>d&&k?(i=1,c=t(g,nt),f=function(){return f-c<=0?f:f-c}()):(f+=t(a,b),i++)};w?(y(s+e(f)),h(s+e(f)),o=f,n(function(){l();h(s+e(f));o=f;i++},p)):(y(s+e(f)+"."+v()),h(s+e(f)+"."+v()),o=f,n(function(){l();h(s+e(f)+"."+v());o=f},p))}var a=u.numeralMode||"default",c=parseInt(u.numeralFrom,10)||0,l=parseInt(u.numeralTo,10)||0,f=c,k=l,s=u.word||"",p=parseInt(u.time)||t(1e3,5e3),w=r[0].hasAttribute("no-point")?!0:!1,b=r[0].hasAttribute("one-point")?1:2,d=r[0].hasAttribute("no-switchThousand")?!0:!1,nt=r[0].hasAttribute("give-span")?!0:!1,tt=r[0].hasAttribute("memory"),o=0,it=u.memoryDate||24;tt&&rt();switch(a){case"gap":ut();break;case"timepiece":ft();break;case"increment":g();break;default:g()}}}}]);app.directive("openLuckywheel",["$compile","$window","$http",function(n,t,i){return{restrict:"A",link:function(r,u,f){r.hasLuckywheel=!1;var o=f.luckywheelWidth||screen.width,s=f.luckywheelHeight||screen.height,h=f.luckywheelNoimage==="true"||!1,e=["display:inline-block;","position:fixed;","top:auto;","left:0;","right:auto;","bottom:0;","z-index:999;"],c=f.luckywheelSrc||"https://cdn.weibo-hk.com/Web.Portal/_Common/Content/Views/LuckyWheel/luckywheel_service_new.png",e="<style>.open-luckywheel{"+e.join("")+"}.open-luckywheel>.close-luckywheel{"+["position:absolute;","display:block;","top:0;","right:0;","height:26px;","width:26px;","cursor:pointer;","background:url('https://cdn.weibo-hk.com//Web.Portal/_Common/Content/Views/Shared/images/close.png') no-repeat center center;",].join("")+"}<\/style>",l='<img ng-click="openLuckywheel()" class="openluckywheel-image"  style="width:200px;" src="'+c+'"><\/img>',a=e+l+'<span class="close-luckywheel" ng-click="closedLuckywheel()"><\/span>';i.post("/LuckyWheel/GetEventInfo",{}).then(function(i){if(!i&&!i.data){angular.element(u).css("display","none");return}if(i.data.IsSuccess===!1){angular.element(u).css("display","none");return}h?"":u.append(n(a)(r));r.hasLuckywheel=!0;r.openLuckywheel=function(){var n=t.open("/LuckyWheel","_luckywheel","width="+o+",height="+s);n.moveTo(0,0);n.focus()};r.closedLuckywheel=function(){angular.element(u).css("display","none")}})}}}]);app.directive("popupDialog",["$window","ContactInfoService",function(n,t){return{restrict:"A",link:function(i,r,u){t.getContactInfo().then(function(t){var i=t,f,e,s;if(i.Dialog!=undefined&&i.DialogPage!=undefined){var h=u.closeTime?parseInt(u.closeTime):12e4,c=u.topOffset?parseInt(u.topOffset):120,o=u.leftOffset,l="notClose"in u,a="showOverlay"in u;r.attr("title",i.DialogTitle||"");f=document.createElement("img");f.src=i.Dialog;f.onload=function(){var t=this.nartualWidth,u=i.DialogPage.split(",");$.each(u,function(i,u){n.location.pathname==u&&($.widget("ui.dialog",$.extend({},$.ui.dialog.prototype,{_title:function(n){n.html(this.options.title)}})),r.dialog({width:t+8,autoOpen:!0,modal:a,buttons:{"关闭":function(){r.dialog("close")}},open:function(){l||setTimeout(function(){r.dialog("close")},h)},position:{my:(o===undefined?"":"left")+" top",at:(o===undefined?"":"left+"+o)+" top+"+c}}))})};e=$("<a>");angular.isDefined(i.HttpDialog)&&i.HttpDialog!==""?(e.attr("href",i.HttpDialog).attr("target","_blank"),e.append(f)):e=f;s=$("<div>").addClass("dialog-footer");angular.isDefined(i.DialogFooter)&&s.html(i.DialogFooter);r.append(e).append(s)}})}}}]);app.directive("popupNews",["$timeout","$rootScope","$q","MarqueeService","AnnouncementService",function(n,t,i,r,u){return{restrict:"A",link:function(f,e,o){function p(){n(function(){var n="showMarqueeDialog",i;(a&&(n=t.user?"showLoginMarqueeDialog":"showMarqueeDialog"),l||!sessionStorage[n])&&(!c||t.user)&&(h&&(i=h.every(function(n){return v!=="/"+n}),i)||(f.isMarqueeShowClass=!0,sessionStorage[n]=!0))})}var c=o.hasOwnProperty("loginPopup"),s=o.closeTime?parseInt(o.closeTime):!1,h=o.popupPage?o.popupPage.split(" "):!1,l=o.hasOwnProperty("popupAlways"),a=o.hasOwnProperty("popupTwice"),v=!!$("#home").length||location.pathname==="/"?"/home":location.pathname.toLowerCase(),y=[r.getMarquee(),u.getListSingleton()];i.all(y).then(function(t){var i=t[1].List;i.length===0&&(p(),s&&n(function(){f.isMarqueeShowClass=!1},s))})}}}]);app.directive("popupOpener",["$parse","$window",function(n,t){return{restrict:"A",link:function(n,i,r){var u=r.device,f=u!=undefined&&u.toLowerCase()=="true"?!0:!1,e=r.popupOpenerName,o=r.popupOpenerOptions;i.on("click",function(){f?t.location=r.popupOpener:t.open(r.popupOpener,e||"_blank",o||"width=800,height=500,resizable,scrollbars=yes")});n.$on("$destroy",function(){i.off()})}}}]);app.directive("redEnvelopeEntrance",["$http","$compile","$window","$location",function(n,t,i,r){return{restrict:"A",scope:{isLogin:"="},template:'<div class="redenvelope-track top-track"><div><\/div><\/div><div class="redenvelope-track bottom-track"><div><\/div><\/div>',link:function(u,f){function c(){if(h){l();return}if(!(u.isLogin&&i.location.pathname==="/")){f.remove();return}n.post("/RedEnvelope/GetRedEnvelopList",null).then(function(n){var t=n.data;if(t.IsSuccess===!1){f.remove();return}u.redEnvelopes=t||[];e()})}function l(){function n(t){var r=t.data.ReturnObject;u.redEnvelopes=[r]||[];e();$("[red-envelope-entrance] [red-envelope-float]").eq(0).click();i.removeEventListener("message",n,!1)}i.addEventListener("message",n,!1);i.opener.postMessage("message",r.search().redenvelope)}function e(){var n,i;if(u.redEnvelopes.length<1){f.remove();return}for(n=0;n<u.redEnvelopes.length;n++)i='<div red-envelope-float red-envelope-info="redEnvelopes['+n+']"><\/div>',n%2==0?o.append(i):s.append(i);t(f.contents())(u);a();$("[red-envelope-entrance] .redenvelope-track.top-track").css({"animation-duration":Math.floor(Math.random()*15+25)+"s"});$("[red-envelope-entrance] .redenvelope-track.bottom-track").css({"animation-duration":Math.floor(Math.random()*15+30)+"s"})}function a(){for(var r,u,t=$("[red-envelope-entrance] [red-envelope-float]"),i=30,n=0;n<t.length;n++)r=Math.floor(Math.random()*(200-i)+i),u=t.eq(n),u.css({"margin-right":r+"px"});f.css("visibility","visible")}var o=$("[red-envelope-entrance] .redenvelope-track.top-track > div"),s=$("[red-envelope-entrance] .redenvelope-track.bottom-track > div"),h=r.search().redenvelope?!0:!1;f.css("visibility","hidden");c()}}}]);app.directive("redEnvelopeFloat",["$modal",function(n){return{restrict:"A",scope:{redEnvelopeInfo:"="},template:'<div meidon-countdown endtime="{{redEnvelopeInfo.EndTime}}" end-fn="closed()"><\/div>',link:function(t,i){function e(){i.bind("click",function(){o()})}function o(){r=!0;u=n.open({template:'<span class="dismiss" ng-click="dismiss()"><\/span><div class="red-envelope-content" ng-class="{\'info\':receivePage === \'info\', \'withdraw\':receivePage === \'withdraw\'}">    <h3 class="name" ng-bind="info.Name"><\/h3>    <p class="description" ng-bind="info.Description"><\/p>    <img class="redenvelope" src="https://cdn.weibo-hk.com/Web.Portal/_Common/Content/Views/RedEnvelope/images/redenvelope.png" ng-click="goWithdrawPage()" />    <div class="countdown" meidon-countdown endtime="{{info.EndTime}}" end-fn="timeout()"><\/div>    <p class="endtime-tip" ng-bind="langs.EndTimeTip"><\/p>    <img class="redenvelope-open" src="https://cdn.weibo-hk.com/Web.Portal/_Common/Content/Views/RedEnvelope/images/redenvelope_open.png" />    <div class="coin" ng-class="{\'show\': animateStart}"><span ng-bind="info.Amount | currency:\'￥\':2"><\/span><\/div>    <button class="btn-withdraw" type="button" ng-click="withdraw()" ng-disabled="isWithdraw"><\/button><\/div>',controller:["$scope","$http","$modalInstance","$timeout","info","CustomModalService","labelService",function(n,t,i,r,u,f,e){function o(){n.receivePage="withdraw";r(function(){n.animateStart=!0},50)}function s(){!n.isWithdrawing&&(n.info.Id||n.info.Id===0)&&(n.isWithdrawing=!0,t.post("/RedEnvelope/Received",{id:n.info.Id}).then(function(t){var r=t.data;if(n.isWithdrawing=!1,r.IsSuccess===!1){f.alertError(r.ErrorMessage).then(function(){i.close()});return}i.close()}))}function h(){i.dismiss()}n.receivePage="info";n.info=u;n.langs=e.get("RedEnvelope");n.goWithdrawPage=o;n.withdraw=s;n.dismiss=h}],resolve:{info:function(){return t.redEnvelopeInfo}},windowClass:"modal-red-envelope"});u.result.then(function(){r=!1;f()},function(){r=!1})}function f(){r&&u.dismiss();i.css({height:0,overflow:"hidden",visibility:"hidden"})}var u=null,r=!1;t.closed=f;e()}}}]);app.directive("registerInfo",["$http","$location","$q","$window","$filter","$rootScope",function(n,t,i,r,u,f){function o(){if(t.search().registerpreview){var i=sessionStorage.getItem("registerInfoPreview");i?e.resolve(i):(r.addEventListener("message",u,!1),r.opener.postMessage("message",t.search().registerpreview));function u(n){var t=n.data.Copywriting||"";e.resolve(t);f.$broadcast("showRegisterDialog");r.removeEventListener("message",u,!1);n.data.Copywriting!==undefined&&sessionStorage.setItem("registerInfoPreview",t)}}else n.post("/Register/GetRegisterCopywriting").then(function(n){var t=n.data.Copywriting;e.resolve(t)});return e.promise}function s(n){var t="[register-info] ";return t+n.trim().replace(/\r?\n|\r/g,"").replace(/}(?!$)/g,"}"+t)}var e=i.defer();return{restrict:"A",scope:{},link:function(n,t,i){i.hasOwnProperty("useStatic")||(t.addClass("ng-hide"),o().then(function(n){if(n!==null){t.empty();var i=n.replace(/src=\"([^\"])+(png|jpg|gif)\"/g,function(n){return u("filterCdn")(n,"https://cdn2.weibo-hk.com/")});t.html(i);t.append("<style>img{max-width:100%;}<\/style>");t.find("style").each(function(){var n=$(this).text();$(this).empty();$(this).append(s(n))})}t.removeClass("ng-hide")}))}}}]);app.directive("reloadOpener",["$window",function(n){return{restrict:"A",link:function(){n.opener&&n.opener.location.reload()}}}]);app.directive("reviewGame",["CookieService","GenericGameService","LobbyNavService",function(n,t,i){return{replace:!1,restrict:"A",template:'<ul><li class="no-review" ng-show="reviewLists.length===0">暂无资料<\/li><li ng-repeat="reviewList in reviewLists | limitTo:gameLength"><img ng-src="{{reviewList.ButtonImagePath}}" onerror="this.src =\'https://cdn.weibo-hk.com/Web.Portal/_Common/Content/Views/Shared/images/review/default.png\';" title="{{reviewList.DisplayName}}" ng-click="toReviewGame(reviewList)"/><div ng-click="toReviewGame(reviewList)" title="{{reviewList.DisplayName}}">{{reviewList.DisplayName}}<\/div><\/li><\/ul>',link:function(r,u,f){function a(){o.length>0&&l?t.checkGames(o).then(function(t){r.reviewLists=t;localStorage.setItem(e,JSON.stringify(t));n.setCookieMinute(s,!0,c)}):r.reviewLists=o}var e="reviewGame_0.0.2",s="reviewGame",c=10,o=JSON.parse(localStorage.getItem(e))||[],l=n.getCookie(s)===null,h=null;r.reviewLists=[];t.getCategoryKey("近期浏览").then(function(n){h=n;a()});r.gameLength=parseInt(f.gameLength)?parseInt(f.gameLength):10;r.toReviewGame=function(n){var r=t.getGameInfo(n,h);i.openLobbyNav(r.action,r.supplier,"review")};window.addEventListener("storage",function(){r.reviewLists=JSON.parse(localStorage.getItem(e))})}}}]);app.directive("scrollFloat",["$interval",function(n){return{restrict:"A",link:function(t,i,r){var o=parseInt(r.floatTop),s=parseInt(r.floatSide),h=parseInt(r.floatMargin==""||r.floatMargin==null?"0":r.floatMargin),u=document.createElement("script"),f,e;u.type="text/javascript";u.src="https://cdn.weibo-hk.com/Web.Portal/_Common/Scripts/float.js";angular.isDefined(t.loadFloatLibrary)||(document.body.appendChild(u),t.loadFloatLibrary=!0);f=n(function(){typeof $.prototype.Float=="function"&&(n.cancel(f),e())},1);e=function(){i.Float({topSide:o,floatRight:s,side:h})}}}}]);app.directive("scrollfollow",[function(){return{restrict:"A",link:function(n,t,i){var u=$(t).offset(),a=$(t)[0].hasAttribute("show-btn");if(a){var v=$(t).find("*"),f=$(t).css("left")==="0px"?"left":"right",y=$(t).css("left")==="0px"?"right":"left",e="#"+f+"-trigger",h=i.btnWidth?i.btnWidth+"px":"34px",p=$(t).width(),r=!0,s,c=$(t)[0].hasAttribute("hide-arrow"),l=(i.showText||"更多")+(c?"":f==="left"?"►":"◄"),w=(i.hideText||"隐藏")+(c?"":f==="left"?"◄":"►"),b=$(t)[0].hasAttribute("hover-show")?"mouseover":"click";(function(){var n='<div id="'+f+'-trigger">'+l+"<\/div>",r=f==="left"?"right":"left",i=e+"{position: absolute;top: 59px;display: none;width: "+h+";"+y+":-"+h+';padding: 8px 0;color: #fff;font-size: 18px;font-weight: bold;text-align: center;background: url("https://cdn.weibo-hk.com/Web.Portal/_Common/Content/Views/Shared/images/transparent-black.png");border-radius: 6px;cursor: pointer;}';$("head").append('<style type="text/css">'+i+"<\/style>");$(t).append(n)})();function o(){v.stop().animate({width:r?"0":p},300);$(e).text(r?l:w);r=!r}if(b==="mouseover")$(t).mouseenter(function(){o()}).mouseleave(function(){o()});else $(e).on("click",function(){o()});$(window).on("load resize",function(){var n;clearTimeout(n);n=setTimeout(function(){var n=$(window).height(),i=$(t).outerHeight()+u.top;n<i?r&&!s&&(o(),$(e).show("fast"),s=!0):(s=!1,$(e).hide("fast"),r||o())},100)})}else $(window).on("load resize",function(){var n=$(window).height(),i=$(t).outerHeight()+u.top;n<i?$(t).hide():$(t).show()});$(window).on("scroll",function(){$(window).scrollTop()>u.top?$(t).stop().animate({top:$(document).scrollTop()+u.top}):$(t).stop().animate({top:u.top})})}}}]);app.directive("scrollToFixed",function(){return{restrict:"A",link:function(n,t,i){var r={zIndex:null,spacerClass:"spacer",className:"fixed-top"};angular.isDefined(i.scrollToFixed)&&(r.marginTop=parseInt(i.scrollToFixed));angular.isDefined(i.scrollBottom)&&(r.bottom=parseInt(i.scrollBottom),r.limit=t.offset().top);angular.isDefined(i.scrollLimit)&&(r.limit=parseInt(i.scrollLimit));angular.isDefined(i.scrollZindex)&&(r.zIndex=parseInt(i.scrollZindex));angular.isDefined(i.spacerClass)&&(r.spacerClass=i.spacerClass);angular.isDefined(i.className)&&(r.className=i.className);t.scrollToFixed(r)}}});app.directive("scrolltopFixed",[function(){return{restrict:"A",link:function(n,t,i){var r=function(){var n=i.scrolltopFixed||0,r=$("body").width(),u=$(window).width();$(window).scrollTop()>n?$(t).addClass("ScrollTop"):$(t).removeClass("ScrollTop");r>u&&$(t).css("position")==="fixed"?$(window).scrollLeft()>0?$(t).css("left",-$(window).scrollLeft()):$(t).removeAttr("style"):$(t).removeAttr("style")};r();$(window).on("scroll",r)}}}]);app.directive("scrollToTop",[function(){return{restrict:"A",link:function(n,t,i){var r=0,u=i.animate===""||i.animate?!0:!1,f=i.animate===""?"slow":i.animate;i.scrollToTop!==""&&(r=isNaN(parseInt(i.scrollToTop,10))?$(i.scrollToTop).offset().top:parseInt(i.scrollToTop,10));angular.element(t).on("click",function(){u?$("html,body").animate({scrollTop:r},f):window.scrollTo(0,r)})}}}]);app.directive("selectLanguage",["$http","$timeout","languageService",function(n,t,i){return{restrict:"A",link:function(n,r){function f(){r.is("select")?r.change(function(){i.changeLanguage($(this).val()).then(u)}):r.find("[data-language]").click(function(){i.changeLanguage($(this).attr("data-language")).then(u)})}function u(){location.reload()}n.currentLanguage=i.currentLanguage;i.getLanguageData().then(function(i){n.language=i;t(f)})}}}]);app.directive("serviceClosed",[function(){return{restrict:"A",link:function(n,t){var i=$(t);i.on("click",function(){i.parents("aside").hide()})}}}]);app.directive("serviceNinja",[function(){return{restrict:"A",link:function(n,t,i){var r=t,u=i.serviceNinja?i.serviceNinja:"fast";r.on("click",function(){r.hasClass("accordion")?r.removeClass("accordion").nextAll("[ninja]").slideDown(u,"linear"):r.addClass("accordion").nextAll("[ninja]").slideUp(u,"linear")});n.$on("$destroy",function(){t.off()})}}}]);app.directive("shiftTarget",[function(){return{restrict:"A",link:function(n,t,i){var r=/^http/gi;i.$observe("href",function(){r.test(i.href)&&t.attr("target","_blank")})}}}]);app.directive("showContent",["_env",function(n){return{restrict:"A",link:function(t,i){var r=n.showContent!==undefined?n.showContent.Height:0;angular.element(i).on("click",function(){var n=i.next(".content").offset().top-r;$("html,body").animate({scrollTop:n},"fast")})}}}]);app.directive("siteAnnouncement",["ContactInfoService",function(n){return{restrict:"A",priority:599,link:function(t,i,r){var u=parseInt(r.iframeWidth),f=parseInt(r.iframeHeight);if($(i).hide(),location.pathname!=="/"){$(i).remove();return}n.getContactInfo().then(function(n){var r=n,e=location.protocol,t;if(e=="https:"&&r.HttpHtmlDialog.indexOf(e)==-1){$(i).remove();return}t=document.createElement("iframe");t.src=r.HttpHtmlDialog;t.width=u;t.height=f;t.frameborder=0;t.scrolling="no";t.attachEvent?t.attachEvent("onload",function(){$(i).show()}):t.onload=function(){$(i).show()};i.append(t);$(i).children(".closed").on("click",function(){$(i).remove()})})}}}]);app.directive("slideBanner",["$compile","SliderService",function(n,t){return{restrict:"A",link:function(i,r,u){var f=r.css("display")||"block";r.css("display","none");t.getSliderNew().then(function(t){var s=t,h,c;if(s.length!==0){r.css("display",f);var e=[],l=$(r).children(".slide"),o=u.slidePager===undefined||u.slidePager===""?!1:u.slidePager;if(o&&(h=r.find(".slide-pager")),angular.forEach(s,function(n,t){var f="https://cdn2.weibo-hk.com/"+n.Url,r=$("<img>").attr("src",f)[0].outerHTML,i=n.Link,s;e[t]=i.indexOf("http")!==-1?'<a href="'+i+'" target="_blank">'+r+"<\/a>":i.indexOf("()")!==-1?'<a href="javascript:void(0)" ng-click='+i+">"+r+"<\/a>":i.indexOf("/")===0?'<a href="'+i+'">'+r+"<\/a>":u.defaultUrl?'<a href="'+u.defaultUrl+'">'+r+"<\/a>":'<a href="javascript:void(0)">'+r+"<\/a>";o&&/img/gi.test(o)&&(s=o.replace(/<img>/gi,'<img src="'+f+'" />'),h.append($("<li>").append(s)))}),c=e.join(""),l.append(n(c)(i)),s.length===1){r.find(".slide-pager").css("display","none");r.find(".slide-click").css("display","none");return}$(r).slide({titCell:o?"ul.slide-pager li":"ul.slide-pager",mainCell:"div.slide",autoPage:o?!1:!0,autoPlay:!0,vis:u.slideVis?u.slideVis:"1",effect:u.slideEffect||"fold",interTime:parseInt(u.slideDuration)||3e3,delayTime:parseInt(u.slideDelay)||500,easing:u.slideEase||"swing",trigger:u.slideTrigger||"click"})}})}}}]);app.directive("slideMenu",[function(){return{restrict:"A",link:function(n,t,i){$(t).find(".subnav").parent().addClass("has-menu");var r=i.slideMenu,u=$(t).attr("time"),f=r?r:"slideDown",e=u?u:"300";$(t).slide({type:"menu",titCell:".has-menu",targetCell:".subnav",effect:f,delayTime:e})}}}]);app.directive("slideNavbg",[function(){return{restrict:"A",link:function(n,t,i){var u,h=location.pathname,f=$(t).children("ul"),e=f.children("li"),o=i.slideNavbg===""?100:parseInt(i.slideNavbg),s=$(t)[0].hasAttribute("return-current"),r;if(f.append("<li id='slide-block'><\/li>"),r=$("#slide-block"),e.each(function(){$(this).children("a").attr("href")===h&&(u=$(this).position().left)}),s){function s(){r.stop().animate({left:r.data("origLeft")})}}else function s(){return}r.css("left",u||0).data("origLeft",r.position().left);e.hover(function(){u=$(this).position().left;r.stop().animate({left:u},o)},function(){s()},o)}}}]);app.directive("superJackpot",["$filter",function(){function n(n){n=(Math.round(n*100)/100).toString().replace(/^(\d*)$/,"$1.");n=(n+"00").replace(/(\d*\.\d{2})\d*/,"$1");n=n.replace(".",",");for(var t=/(\d)(\d{3},)/;t.test(n);)n=n.replace(t,"$1,$2");return n.replace(/,(\d{2})$/,".$1")}return{restrict:"AE",link:function(t,i){var r=parseInt("6"+Math.floor(Math.random()*1e6));$(i).html(n(r));setInterval(function(){var t=Math.random()*1e3;r+=t;$(i).html(n(r))},Math.random()*2e4)}}}]);app.directive("toggleColor",["$interval",function(n){return{restrict:"A",link:function(t,i,r){function s(){i.css("color","#"+f[u]);u=u>=f.length-1?0:u+1}function h(){i.toggleClass("color")}var f=r.colors?r.colors.split(","):!1,o=r.toggleColor?r.toggleColor:500,e,u=0;f?e=n(s,o):(i.addClass("toggle-color"),e=n(h,o));i.on("$destroy",function(){n.cancel(e)})}}}]);app.directive("winnerList",["_env","$compile",function(n,t){return{restrict:"A",scope:{},template:'<ul class="winner-list-target"><\/ul>',link:function(i,r,u){function e(){var e=u.winnerAssign?u.winnerAssign:"default",t=JSON.parse(JSON.stringify(n.winnerListRoll[e])),o=t.length,r,f;for(i.winnerList=[],r=0;r<o;r++)f=Math.floor(Math.random()*t.length),i.winnerList.push(t[f]),t.splice(f,1)}function o(){for(var o,f=u.winnerFormat.split(","),s=angular.element(r[0].querySelector("ul.winner-list-target")),e="",n=0;n<f.length;n++)e+='<span class="'+f[n]+'" title="{{item.'+f[n]+'}}">{{item.'+f[n]+"}}<\/span>";o='<li ng-repeat="item in winnerList track by $index" ng-cloak>'+e+"<\/li>";s.append(t(o)(i))}function s(){r.slide({mainCell:".winner-list-target",autoPlay:u.winnerAuto||!0,effect:u.winnerEffect||"topMarquee",vis:parseInt(u.winnerVis,10)||10,interTime:parseInt(u.winnerInterTime,10)||50,scroll:parseInt(u.winnerScroll,10)||1,delayTime:parseInt(u.winnerDelayTime,10)||500,mouseOverStop:u.winnerMouseoverStop||!1})}var f=function(){var n=angular.element("#home").length||window.location.pathname==="/"?"home":window.location.pathname.replace(/\/lobby\/|\//gi,""),t=u.winnerDisablePage?u.winnerDisablePage.replace(/\,/g,"|"):"normal",i=new RegExp(t,"gi");if(n.match(i))return!0}();if(f){r.remove();return}e();o();$(function(){s()})}}}]),function(n){n.fn.slide=function(t){return n.fn.slide.defaults={type:"slide",effect:"fade",autoPlay:!1,delayTime:500,interTime:2500,triggerTime:150,defaultIndex:0,titCell:".hd li",mainCell:".bd",targetCell:null,trigger:"mouseover",scroll:1,vis:1,titOnClassName:"on",autoPage:!1,prevCell:".prev",nextCell:".next",pageStateCell:".pageState",opp:!1,pnLoop:!0,easing:"swing",startFun:null,endFun:null,switchLoad:null,playStateCell:".playState",mouseOverStop:!0,defaultPlay:!0,returnDefault:!1},this.each(function(){var u=n.extend({},n.fn.slide.defaults,t),v=n(this),a=u.effect,d=n(u.prevCell,v),g=n(u.nextCell,v),ir=n(u.pageStateCell,v),ot=n(u.playStateCell,v),c=n(u.titCell,v),o=c.size(),i=n(u.mainCell,v),f=i.children().size(),nt=u.switchLoad,ft=n(u.targetCell,v),r=parseInt(u.defaultIndex),l=parseInt(u.delayTime),gt=parseInt(u.interTime),ur=parseInt(u.triggerTime),s=parseInt(u.scroll),pi=u.autoPlay=="false"||u.autoPlay==!1?!1:!0,ni=u.opp=="false"||u.opp==!1?!1:!0,rr=u.autoPage=="false"||u.autoPage==!1?!1:!0,lt=u.pnLoop=="false"||u.pnLoop==!1?!1:!0,ti=u.mouseOverStop=="false"||u.mouseOverStop==!1?!1:!0,ht=u.defaultPlay=="false"||u.defaultPlay==!1?!1:!0,wi=u.returnDefault=="false"||u.returnDefault==!1?!1:!0,p=isNaN(u.vis)?1:parseInt(u.vis),ii=!-[1,]&&!window.XMLHttpRequest,y=0,e=0,ct=0,at=0,w=u.easing,et=null,vt=null,yt=null,tt=u.titOnClassName,bi=c.index(v.find("."+tt)),ri=r=bi==-1?r:bi,ki=r,st=r,h=f>=p?f%s!=0?f%s:s:0,b,it=a=="leftMarquee"||a=="topMarquee"?!0:!1,di=function(){n.isFunction(u.startFun)&&u.startFun(r,o,v,n(u.titCell,v),i,ft,d,g)},k=function(){n.isFunction(u.endFun)&&u.endFun(r,o,v,n(u.titCell,v),i,ft,d,g)},ui=function(){c.removeClass(tt);ht&&c.eq(ki).addClass(tt)},pt,wt,rt,fi,ei,nr,vi,yi,tr,dt;if(u.type=="menu"){ht&&c.removeClass(tt).eq(r).addClass(tt);c.hover(function(){b=n(this).find(u.targetCell);var t=c.index(n(this));vt=setTimeout(function(){r=t;c.removeClass(tt).eq(r).addClass(tt);di();switch(a){case"fade":b.stop(!0,!0).animate({opacity:"show"},l,w,k);break;case"slideDown":b.stop(!0,!0).animate({height:"show"},l,w,k)}},u.triggerTime)},function(){clearTimeout(vt);switch(a){case"fade":b.animate({opacity:"hide"},l,w);break;case"slideDown":b.animate({height:"hide"},l,w)}});wi&&v.hover(function(){clearTimeout(yt)},function(){yt=setTimeout(ui,l)});return}if(o==0&&(o=f),it&&(o=2),rr){if(f>=p?a=="leftLoop"||a=="topLoop"?o=f%s!=0?(f/s^0)+1:f/s:(pt=f-p,o=1+parseInt(pt%s!=0?pt/s+1:pt/s),o<=0&&(o=1)):o=1,c.html(""),wt="",u.autoPage==!0||u.autoPage=="true")for(rt=0;rt<o;rt++)wt+="<li>"+(rt+1)+"<\/li>";else for(rt=0;rt<o;rt++)wt+=u.autoPage.replace("$",rt+1);c.html(wt);c=c.children()}if(f>=p){i.children().each(function(){n(this).width()>ct&&(ct=n(this).width(),e=n(this).outerWidth(!0));n(this).height()>at&&(at=n(this).height(),y=n(this).outerHeight(!0))});fi=i.children();ei=function(){for(var n=0;n<p;n++)fi.eq(n).clone().addClass("clone").appendTo(i);for(n=0;n<h;n++)fi.eq(f-n-1).clone().addClass("clone").prependTo(i)};switch(a){case"fold":i.css({position:"relative",width:e,height:y}).children().css({position:"absolute",width:ct,left:0,top:0,display:"none"});break;case"top":i.wrap('<div class="tempWrap" style="overflow:hidden; position:relative; height:'+p*y+'px"><\/div>').css({top:-(r*s)*y,position:"relative",padding:"0",margin:"0"}).children().css({height:at});break;case"left":i.wrap('<div class="tempWrap" style="overflow:hidden; position:relative; width:'+p*e+'px"><\/div>').css({width:f*e,left:-(r*s)*e,position:"relative",overflow:"hidden",padding:"0",margin:"0"}).children().css({float:"left",width:ct});break;case"leftLoop":case"leftMarquee":ei();i.wrap('<div class="tempWrap" style="overflow:hidden; position:relative; width:'+p*e+'px"><\/div>').css({width:(f+p+h)*e,position:"relative",overflow:"hidden",padding:"0",margin:"0",left:-(h+r*s)*e}).children().css({float:"left",width:ct});break;case"topLoop":case"topMarquee":ei();i.wrap('<div class="tempWrap" style="overflow:hidden; position:relative; height:'+p*y+'px"><\/div>').css({height:(f+p+h)*y,position:"relative",padding:"0",margin:"0",top:-(h+r*s)*y}).children().css({height:at})}}var oi=function(n){var t=n*s;return n==o?t=f:n==-1&&f%s!=0&&(t=-f%s),t},gi=function(t){var u=function(r){for(var u=r;u<p+r;u++)t.eq(u).find("img["+nt+"]").each(function(){var r=n(this),u,t;if(r.attr("src",r.attr(nt)).removeAttr(nt),i.find(".clone")[0])for(u=i.children(),t=0;t<u.size();t++)u.eq(t).find("img["+nt+"]").each(function(){n(this).attr(nt)==r.attr("src")&&n(this).attr("src",n(this).attr(nt)).removeAttr(nt)})})},f;switch(a){case"fade":case"fold":case"top":case"left":case"slideDown":u(r*s);break;case"leftLoop":case"topLoop":u(h+oi(st));break;case"leftMarquee":case"topMarquee":var o=a=="leftMarquee"?i.css("left").replace("px",""):i.css("top").replace("px",""),c=a=="leftMarquee"?e:y,l=h;o%c!=0&&(f=Math.abs(o/c^0),l=r==1?h+f:h+f-1);u(l)}},ut=function(n){var t,u,v;if(!ht||ri!=r||n||it){if(it?r>=1?r=1:r<=0&&(r=0):(st=r,r>=o?r=0:r<0&&(r=o-1)),di(),nt!=null&&gi(i.children()),ft[0]&&(b=ft.eq(r),nt!=null&&gi(ft),a=="slideDown"?(ft.not(b).stop(!0,!0).slideUp(l),b.slideDown(l,w,function(){i[0]||k()})):(ft.not(b).stop(!0,!0).hide(),b.animate({opacity:"show"},l,function(){i[0]||k()}))),f>=p)switch(a){case"fade":i.children().stop(!0,!0).eq(r).animate({opacity:"show"},l,w,function(){k()}).siblings().hide();break;case"fold":i.children().stop(!0,!0).eq(r).animate({opacity:"show"},l,w,function(){k()}).siblings().animate({opacity:"hide"},l,w);break;case"top":i.stop(!0,!1).animate({top:-r*s*y},l,w,function(){k()});break;case"left":i.stop(!0,!1).animate({left:-r*s*e},l,w,function(){k()});break;case"leftLoop":t=st;i.stop(!0,!0).animate({left:-(oi(st)+h)*e},l,w,function(){t<=-1?i.css("left",-(h+(o-1)*s)*e):t>=o&&i.css("left",-h*e);k()});break;case"topLoop":t=st;i.stop(!0,!0).animate({top:-(oi(st)+h)*y},l,w,function(){t<=-1?i.css("top",-(h+(o-1)*s)*y):t>=o&&i.css("top",-h*y);k()});break;case"leftMarquee":u=i.css("left").replace("px","");r==0?i.animate({left:++u},0,function(){i.css("left").replace("px","")>=0&&i.css("left",-f*e)}):i.animate({left:--u},0,function(){i.css("left").replace("px","")<=-(f+h)*e&&i.css("left",-h*e)});break;case"topMarquee":v=i.css("top").replace("px","");r==0?i.animate({top:++v},0,function(){i.css("top").replace("px","")>=0&&i.css("top",-f*y)}):i.animate({top:--v},0,function(){i.css("top").replace("px","")<=-(f+h)*y&&i.css("top",-h*y)})}c.removeClass(tt).eq(r).addClass(tt);ri=r;lt||(g.removeClass("nextStop"),d.removeClass("prevStop"),r==0&&d.addClass("prevStop"),r==o-1&&g.addClass("nextStop"));ir.html("<span>"+(r+1)+"<\/span>/"+o)}};ht&&ut(!0);wi&&v.hover(function(){clearTimeout(yt)},function(){yt=setTimeout(function(){r=ki;ht?ut():a=="slideDown"?b.slideUp(l,ui):b.animate({opacity:"hide"},l,ui);ri=r},300)});var si=function(n){et=setInterval(function(){ni?r--:r++;ut()},!n?gt:n)},bt=function(n){et=setInterval(ut,!n?gt:n)},kt=function(){ti||!pi||ot.hasClass("pauseState")||(clearInterval(et),si())},hi=function(){(lt||r!=o-1)&&(r++,ut(),it||kt())},ci=function(){(lt||r!=0)&&(r--,ut(),it||kt())},li=function(){clearInterval(et);it?bt():si();ot.removeClass("pauseState")},ai=function(){clearInterval(et);ot.addClass("pauseState")};pi?it?(ni?r--:r++,bt(),ti&&i.hover(ai,li)):(si(),ti&&v.hover(ai,li)):(it&&(ni?r--:r++),ot.addClass("pauseState"));ot.click(function(){ot.hasClass("pauseState")?li():ai()});u.trigger=="mouseover"?c.hover(function(){var n=c.index(this);vt=setTimeout(function(){r=n;ut();kt()},u.triggerTime)},function(){clearTimeout(vt)}):c.click(function(){r=c.index(this);ut();kt()});it?(g.mousedown(hi),d.mousedown(ci),lt&&(vi=function(){nr=setTimeout(function(){clearInterval(et);bt(gt/10^0)},150)},yi=function(){clearTimeout(nr);clearInterval(et);bt()},g.mousedown(vi),g.mouseup(yi),d.mousedown(vi),d.mouseup(yi)),u.trigger=="mouseover"&&(g.hover(hi,function(){}),d.hover(ci,function(){}))):(g.click(hi),d.click(ci));u.vis=="auto"&&s==1&&(a=="left"||a=="leftLoop")&&(dt=function(){ii&&(i.width("auto"),i.children().width("auto"));i.parent().width("auto");e=i.parent().width();ii&&i.parent().width(e);i.children().width(e);a=="left"?(i.width(e*f),i.stop(!0,!1).animate({left:-r*e},0)):(i.width(e*(f+2)),i.stop(!0,!1).animate({left:-(r+1)*e},0));ii||e==i.parent().width()||dt()},n(window).resize(function(){clearTimeout(tr);tr=setTimeout(dt,100)}),dt())})}}(jQuery);jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(n,t,i,r,u){return jQuery.easing[jQuery.easing.def](n,t,i,r,u)},easeInQuad:function(n,t,i,r,u){return r*(t/=u)*t+i},easeOutQuad:function(n,t,i,r,u){return-r*(t/=u)*(t-2)+i},easeInOutQuad:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t+i:-r/2*(--t*(t-2)-1)+i},easeInCubic:function(n,t,i,r,u){return r*(t/=u)*t*t+i},easeOutCubic:function(n,t,i,r,u){return r*((t=t/u-1)*t*t+1)+i},easeInOutCubic:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t+i:r/2*((t-=2)*t*t+2)+i},easeInQuart:function(n,t,i,r,u){return r*(t/=u)*t*t*t+i},easeOutQuart:function(n,t,i,r,u){return-r*((t=t/u-1)*t*t*t-1)+i},easeInOutQuart:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t*t+i:-r/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(n,t,i,r,u){return r*(t/=u)*t*t*t*t+i},easeOutQuint:function(n,t,i,r,u){return r*((t=t/u-1)*t*t*t*t+1)+i},easeInOutQuint:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t*t*t+i:r/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(n,t,i,r,u){return-r*Math.cos(t/u*(Math.PI/2))+r+i},easeOutSine:function(n,t,i,r,u){return r*Math.sin(t/u*(Math.PI/2))+i},easeInOutSine:function(n,t,i,r,u){return-r/2*(Math.cos(Math.PI*t/u)-1)+i},easeInExpo:function(n,t,i,r,u){return t==0?i:r*Math.pow(2,10*(t/u-1))+i},easeOutExpo:function(n,t,i,r,u){return t==u?i+r:r*(-Math.pow(2,-10*t/u)+1)+i},easeInOutExpo:function(n,t,i,r,u){return t==0?i:t==u?i+r:(t/=u/2)<1?r/2*Math.pow(2,10*(t-1))+i:r/2*(-Math.pow(2,-10*--t)+2)+i},easeInCirc:function(n,t,i,r,u){return-r*(Math.sqrt(1-(t/=u)*t)-1)+i},easeOutCirc:function(n,t,i,r,u){return r*Math.sqrt(1-(t=t/u-1)*t)+i},easeInOutCirc:function(n,t,i,r,u){return(t/=u/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+i:r/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(n,t,i,r,u){var o=1.70158,f=0,e=r;return t==0?i:(t/=u)==1?i+r:(f||(f=u*.3),e<Math.abs(r)?(e=r,o=f/4):o=f/(2*Math.PI)*Math.asin(r/e),-(e*Math.pow(2,10*(t-=1))*Math.sin((t*u-o)*2*Math.PI/f))+i)},easeOutElastic:function(n,t,i,r,u){var o=1.70158,f=0,e=r;return t==0?i:(t/=u)==1?i+r:(f||(f=u*.3),e<Math.abs(r)?(e=r,o=f/4):o=f/(2*Math.PI)*Math.asin(r/e),e*Math.pow(2,-10*t)*Math.sin((t*u-o)*2*Math.PI/f)+r+i)},easeInOutElastic:function(n,t,i,r,u){var o=1.70158,f=0,e=r;return t==0?i:(t/=u/2)==2?i+r:(f||(f=u*.3*1.5),e<Math.abs(r)?(e=r,o=f/4):o=f/(2*Math.PI)*Math.asin(r/e),t<1)?-.5*e*Math.pow(2,10*(t-=1))*Math.sin((t*u-o)*2*Math.PI/f)+i:e*Math.pow(2,-10*(t-=1))*Math.sin((t*u-o)*2*Math.PI/f)*.5+r+i},easeInBack:function(n,t,i,r,u,f){return f==undefined&&(f=1.70158),r*(t/=u)*t*((f+1)*t-f)+i},easeOutBack:function(n,t,i,r,u,f){return f==undefined&&(f=1.70158),r*((t=t/u-1)*t*((f+1)*t+f)+1)+i},easeInOutBack:function(n,t,i,r,u,f){return(f==undefined&&(f=1.70158),(t/=u/2)<1)?r/2*t*t*(((f*=1.525)+1)*t-f)+i:r/2*((t-=2)*t*(((f*=1.525)+1)*t+f)+2)+i},easeInBounce:function(n,t,i,r,u){return r-jQuery.easing.easeOutBounce(n,u-t,0,r,u)+i},easeOutBounce:function(n,t,i,r,u){return(t/=u)<1/2.75?r*7.5625*t*t+i:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+i:r*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(n,t,i,r,u){return t<u/2?jQuery.easing.easeInBounce(n,t*2,0,r,u)*.5+i:jQuery.easing.easeOutBounce(n,t*2-u,0,r,u)*.5+r*.5+i}})